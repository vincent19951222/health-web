<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡€ç³–è®°å½•ç»“æœ - æ§ç³–åŠ©æ‰‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Markdownæ¸²æŸ“åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- ä»£ç é«˜äº®åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        /* ç³–å°¿ç—…æ§ç³–ç®¡ç†å¹³å° - ç»Ÿä¸€æ ·å¼æ–‡ä»¶ */

        /* æ ¹æ®UI_design.mdçš„è®¾è®¡è§„åˆ™å®šä¹‰é¢œè‰² */
        /* ä¸»è‰²è°ƒ */
        .primary-color { color: #3b82f6; }
        .primary-dark { color: #2563eb; }
        .secondary-color { color: #f97316; }
        .secondary-dark { color: #ea580c; }
        
        /* åŒ»ç–—ä¸»é¢˜è‰²å½© */
        .medical-blue { color: #3b82f6; }
        .medical-green { color: #22c55e; }
        .medical-red { color: #ef4444; }
        .medical-orange { color: #f59e0b; }
        .medical-purple { color: #8b5cf6; }
        
        /* ä¸­æ€§è‰² */
        .gray-50 { color: #f9fafb; }
        .gray-100 { color: #f3f4f6; }
        .gray-200 { color: #e5e7eb; }
        .gray-300 { color: #d1d5db; }
        .gray-400 { color: #9ca3af; }
        .gray-500 { color: #6b7280; }
        .gray-600 { color: #4b5563; }
        .gray-700 { color: #374151; }
        .gray-800 { color: #1f2937; }
        .gray-900 { color: #111827; }

        /* éšè—æ‰€æœ‰æ»šåŠ¨æ¡ */
        * {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        
        *::-webkit-scrollbar {
            display: none;
        }
        
        /* è¡€ç³–ç»“æœåœ†ç¯æ ·å¼ */
        .blood-sugar-result-circle {
            width: 160px;
            height: 160px;
            background: conic-gradient(from -90deg, #10b981 0deg 216deg, #e5e7eb 216deg 360deg);
            border-radius: 50%;
            position: relative;
            margin: 0 auto;
        }
        
        .blood-sugar-result-circle::before {
            content: '';
            position: absolute;
            top: 12px;
            left: 12px;
            right: 12px;
            bottom: 12px;
            background: white;
            border-radius: 50%;
        }

        /* ç—‡çŠ¶å¡ç‰‡æ ·å¼ */
        .symptom-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 16px 12px;
            background: #f59e0b;
            border-radius: 12px;
            color: white;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
            min-height: 80px;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .symptom-card:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }

        .symptom-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
        }

        /* å¤šåª’ä½“æŠ¥å‘Šå¡ç‰‡æ ·å¼ */
        .medical-report-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .report-content {
            line-height: 1.6;
        }

        .report-content h1, .report-content h2, .report-content h3 {
            color: #374151;
            margin-bottom: 12px;
            margin-top: 0px;
        }

        .report-content h1 { font-size: 24px; font-weight: 700; }
        .report-content h2 { font-size: 20px; font-weight: 600; }
        .report-content h3 { font-size: 18px; font-weight: 600; }

        .report-content p {
            margin-bottom: 12px;
            color: #374151;
        }

        .report-content ul, .report-content ol {
            margin-bottom: 12px;
            padding-left: 20px;
        }

        .report-content li {
            margin-bottom: 4px;
            color: #374151;
        }

        .report-content blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 16px;
            margin: 16px 0;
            background: #f9fafb;
            padding: 12px 16px;
            border-radius: 8px;
        }

        .report-content code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .report-content pre {
            background: #f3f4f6;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 12px 0;
        }

        .media-container {
            margin: 16px 0;
            border-radius: 12px;
            overflow: hidden;
        }

        .media-image {
            width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .media-video {
            width: 100%;
            height: 200px;
            border-radius: 12px;
        }

        .media-audio {
            width: 100%;
            margin: 8px 0;
        }

        .media-caption {
            text-align: center;
            font-size: 14px;
            color: #6b7280;
            margin-top: 8px;
            font-style: italic;
        }

        .report-section {
            margin-bottom: 24px;
        }

        .report-highlight {
            background: linear-gradient(135deg, #3b82f6, #22c55e);
            color: white;
            padding: 16px;
            border-radius: 12px;
            margin: 16px 0;
        }

        .report-warning {
            background: #fef3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
        }

        .report-success {
            background: #d1f2eb;
            border: 1px solid #a3e4d7;
            color: #0e6b56;
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
        }

        /* å“åº”å¼è®¾è®¡ä¼˜åŒ– */
        @media (max-width: 768px) {
            .medical-report-card {
                padding: 16px;
                margin-bottom: 16px;
            }

            .report-content h1 { font-size: 20px; }
            .report-content h2 { font-size: 18px; }
            .report-content h3 { font-size: 16px; }

            .media-video {
                height: 180px;
            }

            .report-highlight, .report-warning, .report-success {
                padding: 10px;
                font-size: 14px;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .report-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            color: #6b7280;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e5e7eb;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 12px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* åª’ä½“å…ƒç´ äº¤äº’æ•ˆæœ */
        .media-image:hover {
            transform: scale(1.02);
            transition: transform 0.3s ease;
        }

        .media-container:hover .media-caption {
            color: #3b82f6;
            transition: color 0.3s ease;
        }

        /* æŠ¥å‘Šå†…å®¹è¡¨æ ¼æ ·å¼ */
        .report-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
        }

        .report-content th,
        .report-content td {
            border: 1px solid #e5e7eb;
            padding: 8px 12px;
            text-align: left;
        }

        .report-content th {
            background: #f9fafb;
            font-weight: 600;
            color: #1f2937;
        }

        .report-content tr:nth-child(even) {
            background: #f9fafb;
        }

        /* ä¸åŒç—‡çŠ¶çš„é¢œè‰² */
        .symptom-card.thirsty { background: #3b82f6; }
        .symptom-card.dry-skin { background: #f59e0b; }
        .symptom-card.frequent-urination { background: #ef4444; }
        .symptom-card.fatigue { background: #8b5cf6; }
        .symptom-card.hunger { background: #10b981; }
        .symptom-card.blurred-vision { background: #6366f1; }

        /* æŒ‰é’®æ ·å¼ */
        .action-button {
            background: #3b82f6;
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            border: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-button:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .secondary-button {
            background: #f97316;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            border: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 40px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .secondary-button:hover {
            background: #ea580c;
        }

        /* ç¡®ä¿ç§»åŠ¨ç«¯ä¸€æ’æ˜¾ç¤º */
        .feedback-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: nowrap;
            gap: 8px;
        }

        .feedback-buttons {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        .feedback-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            color: #9ca3af;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .feedback-btn:hover {
            background: #e5e7eb;
            transform: scale(1.05);
        }

        .feedback-btn.active.like {
            background: #fb923c;
            border-color: #fb923c;
            color: white;
        }

        .feedback-btn.active.dislike {
            background: #3b82f6;
            border-color: #3b82f6;
            color: white;
        }

        .feedback-text {
            flex: 1;
            min-width: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        @media (max-width: 480px) {
            .secondary-button {
                padding: 6px 10px;
                min-width: 36px;
                height: 32px;
                font-size: 12px;
            }
            
            .feedback-text {
                font-size: 12px;
            }
        }

        /* æŠ¥å‘Šå¡ç‰‡æ ·å¼ */
        .report-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            border-left: 4px solid #10b981;
        }

        .report-title {
            display: flex;
            align-items: center;
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 12px;
        }

        .report-content {
            font-size: 14px;
            line-height: 1.6;
            color: #4b5563;
        }

        /* AIæé†’å¡ç‰‡æ ·å¼ - ä»¿é€šçŸ¥æ ·å¼ */
        .ai-reminder-card {
            background: white;
            border-radius: 16px;
            margin: 16px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            position: relative;
            border: 1px solid #e5e7eb;
        }

        .ai-reminder-header {
            display: flex;
            align-items: flex-start;
            padding: 16px;
            position: relative;
        }

        .ai-avatar-container {
            width: 30%;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-right: 12px;
        }

        .ai-avatar {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .ai-avatar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="35" r="20" fill="%23ffffff" opacity="0.8"/><path d="M20 80 Q20 60 50 60 Q80 60 80 80 L80 100 L20 100 Z" fill="%23ffffff" opacity="0.8"/></svg>') center/cover;
        }

        .ai-reminder-content {
            width: 70%;
            padding-left: 4px;
        }

        .ai-reminder-title {
            font-size: 14px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .ai-reminder-message {
            font-size: 14px;
            line-height: 1.4;
            color: #4b5563;
        }

        .close-button {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 24px;
            height: 24px;
            background: rgba(107, 114, 128, 0.1);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .close-button:hover {
            background: rgba(107, 114, 128, 0.2);
        }

        .close-button i {
            font-size: 12px;
            color: #6b7280;
        }

        /* å“åº”å¼ä¼˜åŒ– */
        @media (max-width: 768px) {
            .ai-reminder-header {
                padding: 14px;
            }

            .ai-avatar {
                width: 56px;
                height: 56px;
            }

            .ai-reminder-title {
                font-size: 14px;
            }

            .ai-reminder-message {
                font-size: 14px;
            }

            .close-button {
                width: 20px;
                height: 20px;
                top: 10px;
                right: 10px;
            }

            .close-button i {
                font-size: 10px;
            }
        }

        /* åˆ†å‰²çº¿æ ·å¼ */
        .section-divider {
            display: flex;
            align-items: center;
            margin: 24px 0;
            padding: 0 16px;
        }

        .divider-line {
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, #e5e7eb, transparent);
        }

        .divider-text {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0 16px;
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            color: #6b7280;
            white-space: nowrap;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .divider-text i {
            color: #f59e0b;
            font-size: 12px;
        }

        /* å“åº”å¼ä¼˜åŒ– */
        @media (max-width: 768px) {
            .section-divider {
                margin: 20px 0;
                padding: 0 12px;
            }

            .divider-text {
                padding: 0 12px;
                font-size: 12px;
            }

            .divider-text i {
                font-size: 12px;
            }
        }

        /* äº’è”ç½‘åŒ»é™¢é—®è¯Šå¡ç‰‡æ ·å¼ */
        .online-consultation-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(148, 163, 184, 0.1);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .online-consultation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4f46e5, #06b6d4, #10b981);
        }
        
        .consultation-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .consultation-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            box-shadow: 0 4px 16px rgba(79, 70, 229, 0.3);
        }
        
        .consultation-title {
            flex: 1;
            margin-left: 16px;
        }
        
        .consultation-title h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            line-height: 1.2;
        }
        
        .consultation-title p {
            margin: 4px 0 0 0;
            font-size: 13px;
            color: #64748b;
            line-height: 1.2;
        }
        
        .consultation-status {
            display: flex;
            align-items: center;
        }
        
        .status-badge {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            position: relative;
        }
        
        .status-badge::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 6px;
            background: #ffffff;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .consultation-question {
            margin-bottom: 20px;
        }
        
        .question-bubble {
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            border-radius: 16px;
            padding: 16px;
            display: flex;
            align-items: center;
            border-left: 4px solid #4f46e5;
        }
        
        .question-icon {
            color: #4f46e5;
            margin-right: 12px;
            font-size: 16px;
        }
        
        .question-bubble span {
            color: #374151;
            font-size: 14px;
            font-weight: 500;
            line-height: 1.4;
            /* é™åˆ¶æ˜¾ç¤ºä¸€è¡Œï¼Œè¶…è¿‡ç”¨çœç•¥å· */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        
        /* åŒ»ç”Ÿä¿¡æ¯åŒºåŸŸæ ·å¼ */
        .doctor-section {
            margin-bottom: 4px;
        }

        .doctor-info-row {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .doctor-info-row .doctor-avatar {
            width: 80px;
            height: 120px;
            border-radius: 8px;
            margin-right: 16px;
            border: 3px solid white;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            flex-shrink: 0;
        }

        .doctor-info-row .doctor-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 4px;
        }

        .doctor-info-row .doctor-info {
            flex: 1;
            text-align: left;
        }

        .doctor-info-row .doctor-name {
            font-size: 22px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .doctor-info-row .doctor-title {
            font-size: 16px;
            color: #64748b;
            margin-bottom: 8px;
        }

        .doctor-info-row .doctor-actions {
            display: flex;
            gap: 12px;
            margin-top: 8px;
        }

        .doctor-info-row .doctor-actions .consultation-btn {
            padding: 10px 12px;
            font-size: 12px;
            min-width: 80px;
            min-height: 30px;
        }

        /* åˆ†å‰²çº¿æ ·å¼ */
        .doctor-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #e2e8f0, transparent);
            margin: 16px 0;
        }

        /* åŒ»ç”Ÿæè¿°å®¹å™¨ */
        .doctor-description-container {
            padding: 0 4px;
        }

        .doctor-description-container .doctor-description {
            font-size: 14px;
            color: #64748b;
            line-height: 1.5;
            margin: 0;
            text-align: left;
        }
        
        .consultation-action {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .consultation-btn {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 14px 24px;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(79, 70, 229, 0.3);
            flex: none;
            min-height: 50px;
            width: auto;
            min-width: 120px;
        }

        .consultation-btn.text-btn {
            background: linear-gradient(135deg, #059669, #10b981);
            box-shadow: 0 4px 16px rgba(5, 150, 105, 0.3);
        }

        .consultation-btn.video-btn {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            box-shadow: 0 4px 16px rgba(79, 70, 229, 0.3);
        }
        
        .consultation-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(79, 70, 229, 0.4);
        }
        
        .consultation-btn:active {
            transform: translateY(0);
        }
        
        .btn-shine {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }
        
        .consultation-btn:hover .btn-shine {
            left: 100%;
        }
        
            
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
        
        /* ç§»åŠ¨ç«¯ä¼˜åŒ– - é’ˆå¯¹æ‰‹æœºå±å¹• */
        @media (max-width: 640px) {
            .online-consultation-card {
                padding: 16px;
                margin-bottom: 12px;
            }

            .consultation-header {
                margin-bottom: 12px;
            }

            .consultation-icon {
                width: 36px;
                height: 36px;
                font-size: 16px;
            }

            .consultation-title h3 {
                font-size: 16px;
            }

            .consultation-title p {
                font-size: 12px;
            }

            .doctor-info-row {
                flex-direction: row;
                text-align: left;
                gap: 8px;
                margin-bottom: 12px;
            }

            .doctor-info-row .doctor-avatar {
                width: 60px;
                height: 80px;
                margin-right: 8px;
                border-radius: 6px;
            }

            .doctor-info-row .doctor-info {
                text-align: left;
            }

            .doctor-info-row .doctor-name {
                font-size: 16px;
            }

            .doctor-info-row .doctor-title {
                font-size: 14px;
            }

            .doctor-info-row .doctor-actions {
                flex-direction: row;
                gap: 4px;
                margin-top: 4px;
            }

            .doctor-info-row .doctor-actions .consultation-btn {
                padding: 6px 10px;
                font-size: 12px;
                min-width: 60px;
                min-height: 28px;
            }

            .doctor-divider {
                margin: 8px 0;
            }

            .doctor-description-container {
                padding: 0 2px;
            }

            .doctor-description-container .doctor-description {
                font-size: 14px;
                line-height: 1.5;
            }

            .consultation-action {
                flex-direction: row;
                gap: 4px;
                justify-content: center;
                padding: 0 4px;
            }

            /* ä¸»è¦é—®è¯ŠæŒ‰é’® - ç§»åŠ¨ç«¯ä¼˜åŒ–å°ºå¯¸ */
            .consultation-btn {
                width: auto;
                padding: 8px 12px;
                font-size: 12px;
                min-width: 80px;
                min-height: 32px;
                border-radius: 50px;
                flex: 1;
                max-width: 110px;
            }

            .consultation-btn i {
                font-size: 11px;
                margin-right: 3px;
            }
        }

        /* è¶…å°å±å¹•è¿›ä¸€æ­¥ä¼˜åŒ– */
        @media (max-width: 375px) {
            .consultation-action {
                gap: 4px;
                padding: 0 8px;
            }

            .consultation-btn {
                width: auto;
                padding: 7px 10px;
                font-size: 11px;
                min-width: 75px;
                min-height: 30px;
                border-radius: 50px;
                max-width: 100px;
            }

            .consultation-btn i {
                font-size: 10px;
                margin-right: 2px;
            }
        }
        
        /* æ¨èå¡ç‰‡æ ·å¼ */
        .recommendation-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.2s ease;
        }

        .recommendation-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .recommendation-info {
            display: flex;
            align-items: center;
        }

        .recommendation-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 20px;
        }

        .recommendation-text {
            font-size: 14px;
            font-weight: 500;
            color: #1f2937;
        }

        .recommendation-subtitle {
            font-size: 12px;
            color: #6b7280;
            margin-top: 2px;
        }

    
        /* æµ®åŠ¨å¯¹è¯æ¡†æ ·å¼ - é“ºæ»¡å±å¹•èƒŒæ™¯ */
        .chat-float-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            /* å…¨å®½åº¦èƒŒæ™¯ */
            background: white;
            padding: 12px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            border: none;
            /* æ ¹æ®æ‰‹æœºè§’åº¦è®¾ç½®åœ†è§’ï¼šä¸‹æ–¹åœ†è§’ï¼Œä¸Šæ–¹ç›´è§’ */
            border-radius: 0px 0px 0 0;
            /* ç¡®ä¿åœ¨é¡¶éƒ¨ */
            transform: translateZ(0);
        }

        .chat-buttons-wrapper {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: center;
            max-width: 400px;
            margin: 0 auto;
        }

        .chat-float {
            background: #667eea;
            color: white;
            padding: 14px 24px;
            border-radius: 32px;
            font-size: 15px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            flex: 1;
            border: none;
            min-height: 48px;
        }

        /* å¾®ä¿¡ç»¿è‰²æ ·å¼ - ç¬¬ä¸€ä¸ªæŒ‰é’® */
        .chat-float.wechat-green {
            background: #07C160;
            box-shadow: 0 4px 16px rgba(7, 193, 96, 0.3);
        }

        .chat-float:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .chat-float.wechat-green:hover {
            box-shadow: 0 6px 20px rgba(7, 193, 96, 0.4);
        }

        .chat-float:active {
            transform: translateY(0);
        }

        .chat-float i {
            margin-right: 8px;
            font-size: 16px;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
    <div class="bg-blue-500 text-white">
        <div class="flex justify-between items-center px-4 py-3">
            <!-- è¿”å›æŒ‰é’® -->
            <button onclick="goBack()" class="text-white">
                <i class="fas fa-chevron-left text-xl"></i>
            </button>
            
            <!-- æ ‡é¢˜ -->
            <div class="flex-1 text-center">
                <span class="text-white text-lg font-medium">ææ™“é£</span>
            </div>

            <!-- å³ä¾§æŒ‰é’® -->
            <button onclick="shareResult()" class="text-white">
                <i class="fas fa-share text-xl"></i>
            </button>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="px-4 py-6">

        <!-- è¡€ç³–ç»“æœå±•ç¤º -->
        <div class="text-center mb-2">
            <div class="blood-sugar-result-circle">
                <!-- ä¸­å¿ƒæ•°å€¼ -->
                <div class="absolute inset-0 flex flex-col items-center justify-center z-10">
                    <span id="resultValue" class="text-3xl font-bold text-gray-900">6.7</span>
                    <span class="text-sm text-gray-500">mmol/L</span>
                </div>
            </div>
            
            <!-- è®°å½•æ—¶é—´å’ŒçŠ¶æ€ -->
            <div class="mt-6">
                <div class="text-md text-gray-800 font-medium">
                    <span id="recordDateTime">2025å¹´9æœˆ13æ—¥ 11:07</span>
                    <span class="text-blue-600" id="recordPeriod">åˆé¤å‰</span>
                </div>
            </div>
        </div>

        <!-- ä¼˜å”åŒ»ç”Ÿæé†’ -->
        <div class="ai-reminder-card">
            <div class="ai-reminder-header">
                <!-- å·¦ä¾§å¤´åƒåŒºåŸŸ (30%) -->
                <div class="ai-avatar-container">
                    <div class="ai-avatar">
                        <!-- ä½¿ç”¨ SVG äººç‰©å¤´åƒ -->
                    </div>
                </div>
                
                <!-- å³ä¾§å†…å®¹åŒºåŸŸ (70%) -->
                <div class="ai-reminder-content">
                    <div class="ai-reminder-title">å°ä¼˜æç¤º</div>
                    <div class="ai-reminder-message">
                        ä»¥ä¸‹å†…å®¹æ˜¯åŸºäºä¼˜å”AIåŠ©æ‰‹ç”Ÿæˆçš„æ™ºèƒ½å¥åº·ç®¡ç†æ„è§ï¼Œä»…ä¾›å‚è€ƒã€‚
                    </div>
                </div>
                
                <!-- å…³é—­æŒ‰é’® -->
                <button class="close-button" onclick="closeReminder()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- å¤šåª’ä½“å¥åº·æŠ¥å‘Š -->
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">è¡€ç³–AIåˆ†ææŠ¥å‘Š</h3>

            <!-- æŠ¥å‘Šå¡ç‰‡å®¹å™¨ -->
            <div class="medical-report-card">
                <!-- åŠ è½½çŠ¶æ€æ˜¾ç¤º -->
                <div id="loadingState" class="report-loading">
                    <div class="loading-spinner"></div>
                    <span>AIæŠ¥å‘Šæ­£åœ¨åŠ è½½ä¸­ï¼Œè¯·ç¨å...</span>
                </div>

                <!-- æŠ¥å‘Šå†…å®¹å®¹å™¨ -->
                <div id="reportContent" class="report-content" style="display: none;">
                    <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½markdownå†…å®¹ -->
                </div>
            </div>
        </div>

        <!-- å°ä¼˜çš„å»ºè®® - åˆå§‹éšè— -->
        <div class="mb-6" id="feedbackSection" style="display: none;">
            <div class="feedback-row">
                <span class="feedback-text text-sm text-gray-600">å°ä¼˜çš„å»ºè®®æ˜¯å¦æœ‰å¸®åŠ©ï¼š</span>
                <div class="feedback-buttons">
                    <button class="secondary-button feedback-btn" id="likeBtn" onclick="handleFeedback('like')">
                        <i class="far fa-thumbs-up"></i>
                    </button>
                    <button class="secondary-button feedback-btn" id="dislikeBtn" onclick="handleFeedback('dislike')">
                        <i class="far fa-thumbs-down"></i>
                    </button>
                </div>
            </div>
            <!-- AIæŠ¥å‘Šå±•å¼€æ”¶èµ·æŒ‰é’®å·²åˆ é™¤ï¼Œæ‰€æœ‰å†…å®¹é»˜è®¤å…¨éƒ¨æ˜¾ç¤º -->
        </div>

        <!-- åˆ†å‰²çº¿ - çœ‹ä¸€çœ‹ï¼Œåšä¸€åš - åˆå§‹éšè— -->
        <div class="section-divider" id="dividerSection" style="display: none;">
            <div class="divider-line"></div>
            <div class="divider-text">
                <i class="fas fa-lightbulb"></i>
                <span>çœ‹ä¸€çœ‹ï¼Œåšä¸€åš</span>
            </div>
            <div class="divider-line"></div>
        </div>

        <!-- æ™ºèƒ½æ¨è - åˆå§‹éšè— -->
        <div class="mb-24" id="recommendationSection" style="display: none;">
            <!-- äº’è”ç½‘åŒ»é™¢é—®è¯ŠæŒ‰é’® -->
            <div class="online-consultation-card">
                <div class="consultation-header">
                    <div class="consultation-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="consultation-title">
                        <h3>åœ¨çº¿é—®è¯Š</h3>
                        <p>ä¸“ä¸šåŒ»ç”Ÿ Â· ç²¾å‡†æœåŠ¡</p>
                    </div>
                </div>
                
                <div class="consultation-question">
                    <div class="question-bubble">
                        <i class="fas fa-comment-dots question-icon"></i>
                        <span id="randomQuestion">"é¤åè¡€ç³–20æ€ä¹ˆåŠï¼Ÿ"</span>
                    </div>
                </div>

                <!-- åŒ»ç”Ÿä¿¡æ¯åŒºåŸŸ -->
            <div class="doctor-section">
                <div class="doctor-info-row">
                    <div class="doctor-avatar">
                        <img src="../imgs/æ¬§é˜³å­˜.png" alt="æ¬§é˜³å­˜åŒ»ç”Ÿ">
                    </div>
                    <div class="doctor-info">
                        <h4 class="doctor-name">æ¬§é˜³å­˜</h4>
                        <p class="doctor-title">ä¸»ä»»åŒ»å¸ˆ</p>
                        <div class="doctor-actions">
                            <button class="consultation-btn text-btn" onclick="startTextConsultation()">
                                <i class="fas fa-comments"></i>
                                <span>å›¾æ–‡é—®è¯Š</span>
                                <div class="btn-shine"></div>
                            </button>
                            <button class="consultation-btn video-btn" onclick="startVideoConsultation()">
                                <i class="fas fa-video"></i>
                                <span>è§†é¢‘é—®è¯Š</span>
                                <div class="btn-shine"></div>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- åˆ†å‰²çº¿ -->
                <div class="doctor-divider"></div>

                <!-- åŒ»ç”Ÿæè¿° -->
                <div class="doctor-description-container">
                    <p class="doctor-description">ç¡•å£«ç”Ÿå¯¼å¸ˆï¼ŒåŸæ±Ÿæ±‰å¤§å­¦ç¥ç»å†…ç§‘æ•™ç ”å®¤ä¸»ä»»å’Œæ­¦æ±‰å¸‚ç¬¬å…­åŒ»é™¢ç¥ç»å†…ç§‘ä¸»ä»»ï¼Œæ“…é•¿å¿ƒè„‘è¡€ç®¡ç–¾ç—…é¢„é˜²ã€æ²»ç–—ã€åº·å¤ï¼Œå„ç±»ç¥ç»ç—…å˜çš„ä¸´åºŠè¯Šç–—ã€‚</p>
                </div>
            </div>
            </div>

            <!-- æ¨èé¡¹ç›® - æš‚æ—¶éšè— -->
            <div class="recommendation-card" style="display: none;">
                <div class="recommendation-info">
                    <div class="recommendation-icon bg-red-100">
                        <i class="fas fa-heart text-red-500"></i>
                    </div>
                    <div>
                        <div class="recommendation-text">å…³å¿ƒç³–å‹ä¸‰è§’é¥¼ ã€120g/ç›’ã€‘</div>
                    </div>
                </div>
                <i class="fas fa-chevron-right text-gray-400"></i>
            </div>

            <div class="recommendation-card" style="display: none;">
                <div class="recommendation-info">
                    <div class="recommendation-icon bg-yellow-100">
                        <i class="fas fa-gift text-yellow-500"></i>
                    </div>
                    <div>
                        <div class="recommendation-text">è·å¾—ä½ è·å¾—ä¸€æ¬¡æŠ½å®ç®±æœºä¼š</div>
                    </div>
                </div>
                <i class="fas fa-chevron-right text-gray-400"></i>
            </div>
        </div>

    </div>

    
    <!-- æµ®åŠ¨å¯¹è¯æ¡† - ç™½è‰²èƒŒæ™¯å¡ç‰‡ä¸Šçš„ä¸¤ä¸ªæŒ‰é’® -->
    <div class="chat-float-container">
        <div class="chat-buttons-wrapper">
            <div class="chat-float wechat-green" onclick="openChat()">
                <i class="fas fa-comments"></i>
                è”ç³»å®¢æœ
            </div>
            <div class="chat-float" onclick="openConsultation()">
                <i class="fas fa-user-md"></i>
                çº¿ä¸Šé—®è¯Š
            </div>
        </div>
    </div>

    <script>
        // é¡µé¢åˆå§‹åŒ–
        function initializePage() {
            // è·å–è¡€ç³–è®°å½•æ•°æ®
            const urlParams = new URLSearchParams(window.location.search);
            const value = urlParams.get('value') || '6.7';
            const period = urlParams.get('period') || 'åˆé¤å‰';
            const dateTime = urlParams.get('dateTime') || '2025å¹´9æœˆ13æ—¥ 11:07';
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('resultValue').textContent = value;
            document.getElementById('recordPeriod').textContent = period;
            document.getElementById('recordDateTime').textContent = dateTime;
            
            // æ ¹æ®è¡€ç³–å€¼æ›´æ–°åœ†ç¯é¢œè‰²
            updateCircleColor(parseFloat(value));
        }
        
        // æ›´æ–°åœ†ç¯é¢œè‰²
        function updateCircleColor(value) {
            const circle = document.querySelector('.blood-sugar-result-circle');
            let color = '#10b981'; // æ­£å¸¸ç»¿è‰²
            let percentage = 60; // é»˜è®¤60%
            
            if (value < 3.9) {
                color = '#3b82f6'; // ä½è¡€ç³–è“è‰²
                percentage = 30;
            } else if (value > 7.0) {
                color = '#ef4444'; // é«˜è¡€ç³–çº¢è‰²
                percentage = 80;
            } else if (value > 6.1) {
                color = '#f59e0b'; // åé«˜æ©™è‰²
                percentage = 70;
            }
            
            circle.style.background = `conic-gradient(from -90deg, ${color} 0deg ${percentage * 3.6}deg, #e5e7eb ${percentage * 3.6}deg 360deg)`;
        }

        // è¿”å›åŠŸèƒ½
        function goBack() {
            if (window.parent !== window) {
                window.parent.postMessage({
                    type: 'navigate',
                    page: 'home'
                }, '*');
            } else {
                window.location.href = '/e:/Projects/ui-test/prototypes/home.html';
            }
        }

        // åˆ†äº«ç»“æœ
        function shareResult() {
            // åˆ†äº«åŠŸèƒ½
            if (navigator.share) {
                navigator.share({
                    title: 'æˆ‘çš„è¡€ç³–è®°å½•',
                    text: `è¡€ç³–å€¼ï¼š${document.getElementById('resultValue').textContent} mmol/L`,
                    url: window.location.href
                });
            } else {
                alert('åˆ†äº«åŠŸèƒ½æš‚ä¸æ”¯æŒ');
            }
        }

        // æ‰“å¼€èŠå¤©
        function openChat() {
            if (window.parent !== window) {
                window.parent.postMessage({
                    type: 'navigate',
                    page: 'chat'
                }, '*');
            } else {
                window.location.href = 'chat.html';
            }
        }

        // å…³é—­æé†’å¡ç‰‡
        function closeReminder() {
            const reminderCard = document.querySelector('.ai-reminder-card');
            reminderCard.style.transition = 'all 0.3s ease';
            reminderCard.style.transform = 'translateX(100%)';
            reminderCard.style.opacity = '0';
            
            setTimeout(() => {
                reminderCard.style.display = 'none';
            }, 300);
        }

        // æ‰“å¼€çº¿ä¸Šé—®è¯Š
        function openConsultation() {
            if (window.parent !== window) {
                window.parent.postMessage({
                    type: 'navigate',
                    page: 'consultation'
                }, '*');
            } else {
                window.location.href = 'consultation.html';
            }
        }

        // å¤šåª’ä½“æŠ¥å‘Šå†…å®¹æ¸²æŸ“å‡½æ•° - ä¿æŒloadingçŠ¶æ€
        function renderReportContent() {
            // ä¿æŒloadingçŠ¶æ€ï¼Œä¸è‡ªåŠ¨è·³è½¬åˆ°æŠ¥å‘Šå®ŒæˆçŠ¶æ€
            showLoadingState();

            // æ³¨é‡Šæ‰è‡ªåŠ¨æ˜¾ç¤ºæŠ¥å‘Šå†…å®¹çš„ä»£ç ï¼Œä¿æŒloadingæ ·å¼
            /*
            // æ¨¡æ‹ŸAIç”ŸæˆæŠ¥å‘Šçš„å»¶è¿Ÿè¿‡ç¨‹ï¼ˆ10ç§’å›ºå®šï¼Œæ–¹ä¾¿é¢„è§ˆï¼‰
            const loadingTime = 10000; // 10ç§’å›ºå®šå»¶è¿Ÿ

            setTimeout(() => {
                // éšè—åŠ è½½çŠ¶æ€
                hideLoadingState();

                // æ˜¾ç¤ºå®Œæ•´çš„AIæŠ¥å‘Šå†…å®¹
                const fullMarkdown = `
## æ£€æµ‹ç»“æœæ¦‚è¿°

æ‚¨å¥½ï¼Œ**dnurse_788013**ï¼æ ¹æ®æœ¬æ¬¡è¡€ç³–æ£€æµ‹ç»“æœï¼Œæ‚¨çš„é¤å‰è¡€ç³–å€¼ä¸º **6.7 mmol/L**ï¼Œå¤„äºæ­£å¸¸èŒƒå›´å†…ã€‚

> ğŸ’¡ **åŒ»ç”Ÿæé†’**ï¼šç§‘å­¦é¥®é£Ÿæ˜¯æ‰€æœ‰ç±»å‹ç³–å°¿ç—…æ²»ç–—çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ç³–å°¿ç—…æ‚£è€…è‡ªç„¶ç—…ç¨‹ä¸­ä»»ä½•é˜¶æ®µé¢„é˜²å’Œæ§åˆ¶ä¸è‰¯æˆ–ä¸¥é‡çš„æªæ–½ã€‚

<div class="report-success">
âœ… **æ­å–œæ‚¨**ï¼šæœ¬æ¬¡æ£€æµ‹ç»“æœè‰¯å¥½ï¼Œè¯·ç»§ç»­ä¿æŒå¥åº·çš„ç”Ÿæ´»æ–¹å¼ï¼
</div>

## è¡€ç³–è¶‹åŠ¿åˆ†æ

æ ¹æ®æ‚¨è¿‘æœŸçš„è¡€ç³–ç›‘æµ‹æ•°æ®ï¼Œæˆ‘ä»¬ä¸ºæ‚¨ç”Ÿæˆäº†ä»¥ä¸‹è¶‹åŠ¿å›¾ï¼š

![è¡€ç³–è¶‹åŠ¿å›¾](https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=200&fit=crop&crop=center)


### ä¸»è¦å‘ç°ï¼š

1. **è¡€ç³–æ§åˆ¶è‰¯å¥½**ï¼šæ‚¨çš„è¡€ç³–å€¼ä¿æŒåœ¨ç†æƒ³èŒƒå›´å†…
2. **é¥®é£Ÿç®¡ç†æœ‰æ•ˆ**ï¼šé¤å‰è¡€ç³–ç¨³å®šï¼Œè¯´æ˜é¥®é£Ÿæ§åˆ¶å¾—å½“
3. **ç»§ç»­ä¿æŒ**ï¼šå½“å‰çš„ç”Ÿæ´»æ–¹å¼å’Œæ²»ç–—æ–¹æ¡ˆæ•ˆæœæ˜¾è‘—

## å¥åº·å»ºè®®

### ğŸ é¥®é£Ÿå»ºè®®

- ç»§ç»­ä¿æŒä½ç³–ã€ä½è„‚çš„é¥®é£Ÿä¹ æƒ¯
- å¢åŠ å¯Œå«çº¤ç»´çš„è”¬èœæ‘„å…¥
- æ§åˆ¶ç¢³æ°´åŒ–åˆç‰©çš„æ‘„å…¥é‡
- å®šæ—¶å®šé‡è¿›é¤

### ğŸƒâ€â™‚ï¸ è¿åŠ¨å»ºè®®

é€‚é‡çš„æœ‰æ°§è¿åŠ¨å¯¹è¡€ç³–æ§åˆ¶éå¸¸æœ‰ç›Šï¼š

![è¿åŠ¨ç¤ºæ„å›¾](https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=200&fit=crop&crop=center)


- **æ­¥è¡Œ**ï¼šæ¯å¤©30åˆ†é’Ÿï¼Œå¼ºåº¦é€‚ä¸­
- **æ¸¸æ³³**ï¼šæ¯å‘¨2-3æ¬¡ï¼Œæ¯æ¬¡45åˆ†é’Ÿ
- **ç‘œä¼½**ï¼šæœ‰åŠ©äºæ”¾æ¾èº«å¿ƒï¼Œæ”¹å–„è¡€ç³–

## ä¸“å®¶è®²è§£è§†é¢‘

æˆ‘ä»¬ä¸ºæ‚¨å‡†å¤‡äº†ä¸“ä¸šåŒ»ç”Ÿçš„è®²è§£è§†é¢‘ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£è¡€ç³–ç®¡ç†ï¼š

<video src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" poster="https://images.unsplash.com/photo-1582750433449-648ed127bb54?w=400&h=200&fit=crop&crop=center">
æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
</video>


## æ”¾æ¾éŸ³é¢‘

å‹åŠ›ç®¡ç†å¯¹è¡€ç³–æ§åˆ¶åŒæ ·é‡è¦ï¼Œæˆ‘ä»¬ä¸ºæ‚¨å‡†å¤‡äº†æ”¾æ¾éŸ³é¢‘ï¼š

<audio src="https://www.learningcontainer.com/wp-content/uploads/2020/02/Kalimba.mp3" controls>
 æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
 </audio>

`;

            // æ¸²æŸ“å®Œæ•´å†…å®¹
            const reportContainer = document.getElementById('reportContent');
            const fullHtml = marked.parse(fullMarkdown);
            reportContainer.innerHTML = fullHtml;
            // åœ¨AIæŠ¥å‘Šå†…å®¹ç»“å°¾æ·»åŠ æç¤ºæ–‡å­—
            const disclaimerElement = document.createElement('p');
            disclaimerElement.style.marginTop = '16px';
            disclaimerElement.style.padding = '12px';
            disclaimerElement.style.background = '#f0f9ff';
            disclaimerElement.style.borderLeft = '4px solid #0ea5e9';
            disclaimerElement.style.borderRadius = '4px';
            disclaimerElement.style.color = '#0c4a6e';
            disclaimerElement.style.fontSize = '14px';
            disclaimerElement.style.fontStyle = 'italic';
            disclaimerElement.innerHTML = '<i class="fas fa-info-circle" style="color: #0ea5e9; margin-right: 8px;"></i>å†…å®¹ç”±AIç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒã€‚';
            reportContainer.appendChild(disclaimerElement);

            // å¤„ç†æ‰€æœ‰åª’ä½“å…ƒç´ 
            processMediaElements(reportContainer);

                // AIæŠ¥å‘ŠåŠ è½½å®Œæˆåï¼Œæ˜¾ç¤ºå…¶ä»–åŒºåŸŸ
                showAdditionalSections();

            }, loadingTime);
            */
        }

        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        function showLoadingState() {
            const loadingState = document.getElementById('loadingState');
            const reportContent = document.getElementById('reportContent');

            loadingState.style.display = 'flex';
            reportContent.style.display = 'none';
        }

        // éšè—åŠ è½½çŠ¶æ€
        function hideLoadingState() {
            const loadingState = document.getElementById('loadingState');
            const reportContent = document.getElementById('reportContent');

            loadingState.style.display = 'none';
            reportContent.style.display = 'block';
        }

        // æ˜¾ç¤ºAIæŠ¥å‘ŠåŠ è½½å®Œæˆåçš„å…¶ä»–åŒºåŸŸ
        function showAdditionalSections() {
            const feedbackSection = document.getElementById('feedbackSection');
            const dividerSection = document.getElementById('dividerSection');
            const recommendationSection = document.getElementById('recommendationSection');

            // ä½¿ç”¨æ·¡å…¥åŠ¨ç”»æ˜¾ç¤ºè¿™äº›åŒºåŸŸ
            const sections = [feedbackSection, dividerSection, recommendationSection];

            sections.forEach((section, index) => {
                setTimeout(() => {
                    section.style.display = 'block';
                    section.style.opacity = '0';
                    section.style.transform = 'translateY(20px)';
                    section.style.transition = 'all 0.5s ease';

                    setTimeout(() => {
                        section.style.opacity = '1';
                        section.style.transform = 'translateY(0)';
                    }, 50);
                }, index * 200); // ä¾æ¬¡æ˜¾ç¤ºï¼Œæ¯ä¸ªé—´éš”200ms
            });
        }

        // å±•å¼€è¯¦æƒ…åŠŸèƒ½ï¼ˆå·²åˆ é™¤å±•å¼€æ”¶èµ·æ•ˆæœï¼‰
        function expandDetails() {
            // ä¸å†æä¾›å±•å¼€æ”¶èµ·åŠŸèƒ½
            return;
        }

        // æ”¶èµ·è¯¦æƒ…åŠŸèƒ½ï¼ˆå·²åˆ é™¤å±•å¼€æ”¶èµ·æ•ˆæœï¼‰
        function collapseDetails() {
            // ä¸å†æä¾›å±•å¼€æ”¶èµ·åŠŸèƒ½
            return;
        }

        // æ›´æ–°å±•å¼€/æ”¶èµ·æŒ‰é’®ï¼ˆå·²åˆ é™¤å±•å¼€æ”¶èµ·æ•ˆæœï¼‰
        function updateToggleButton(isExpanded) {
            // ä¸å†æä¾›å±•å¼€æ”¶èµ·åŠŸèƒ½
            return;
        }

        // å¤„ç†åª’ä½“å…ƒç´ çš„é€šç”¨å‡½æ•°
        function processMediaElements(container) {
            // å¤„ç†å›¾ç‰‡
            const images = container.querySelectorAll('img');
            images.forEach(img => {
                const mediaContainer = document.createElement('div');
                mediaContainer.className = 'media-container';
                
                const newImg = document.createElement('img');
                newImg.src = img.src;
                newImg.alt = img.alt;
                newImg.className = 'media-image';
                
                const caption = document.createElement('div');
                caption.className = 'media-caption';
                caption.textContent = img.alt;
                
                mediaContainer.appendChild(newImg);
                mediaContainer.appendChild(caption);
                
                img.parentNode.replaceChild(mediaContainer, img);
            });

            // å¤„ç†è§†é¢‘
            const videos = container.querySelectorAll('video');
            videos.forEach(video => {
                const mediaContainer = document.createElement('div');
                mediaContainer.className = 'media-container';
                
                const newVideo = document.createElement('video');
                newVideo.src = video.src;
                newVideo.poster = video.poster;
                newVideo.controls = true;
                newVideo.className = 'media-video';
                
                const caption = document.createElement('div');
                caption.className = 'media-caption';
                caption.textContent = 'è§†é¢‘ï¼šè¡€ç³–ç®¡ç†ä¸“å®¶è®²è§£';
                
                mediaContainer.appendChild(newVideo);
                mediaContainer.appendChild(caption);
                
                video.parentNode.replaceChild(mediaContainer, video);
            });

            // å¤„ç†éŸ³é¢‘
            const audios = container.querySelectorAll('audio');
            audios.forEach(audio => {
                const mediaContainer = document.createElement('div');
                mediaContainer.className = 'media-container';
                
                const newAudio = document.createElement('audio');
                newAudio.src = audio.src;
                newAudio.controls = true;
                newAudio.className = 'media-audio';
                
                const caption = document.createElement('div');
                caption.className = 'media-caption';
                caption.textContent = 'éŸ³é¢‘ï¼šå†¥æƒ³æ”¾æ¾æŒ‡å¯¼';
                
                mediaContainer.appendChild(newAudio);
                mediaContainer.appendChild(caption);
                
                audio.parentNode.replaceChild(mediaContainer, audio);
            });

            // ä»£ç é«˜äº®
            if (typeof hljs !== 'undefined') {
                hljs.highlightAll();
            }
        }

        // éšæœºé—®é¢˜åˆ—è¡¨
        const randomQuestions = [
            "å¦‚ä½•æ­£ç¡®ä½¿ç”¨èƒ°å²›ç´ ï¼Ÿ",
            "èƒ°å²›ç´ æ³¨å°„æœ‰å“ªäº›æ³¨æ„äº‹é¡¹ï¼Ÿ",
            "èƒ°å²›ç´ çš„ç§ç±»æœ‰å“ªäº›ï¼Ÿ",
            "èƒ°å²›ç´ çš„ä¿å­˜æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ",
            "èƒ°å²›ç´ æ³¨å°„æ—¶é—´å¦‚ä½•å®‰æ’ï¼Ÿ",
            "èƒ°å²›ç´ å‰‚é‡æ€ä¹ˆè°ƒæ•´ï¼Ÿ",
            "èƒ°å²›ç´ è¿‡æ•æ€ä¹ˆåŠï¼Ÿ",
            "èƒ°å²›ç´ æ³µæ€ä¹ˆä½¿ç”¨ï¼Ÿ",
            "é•¿æ•ˆèƒ°å²›ç´ å’ŒçŸ­æ•ˆèƒ°å²›ç´ çš„åŒºåˆ«ï¼Ÿ",
            "èƒ°å²›ç´ ä½¿ç”¨è¿‡ç¨‹ä¸­å¦‚ä½•é¿å…ä½è¡€ç³–ï¼Ÿ"
        ];

        // å½“å‰é—®é¢˜ç´¢å¼•
        let currentQuestionIndex = 0;

        // æ˜¾ç¤ºéšæœºé—®é¢˜ï¼ˆè½®æ’­æ–¹å¼ï¼‰
        function showRandomQuestion() {
            const questionElement = document.getElementById('randomQuestion');
            questionElement.textContent = `"${randomQuestions[currentQuestionIndex]}"`;
            currentQuestionIndex = (currentQuestionIndex + 1) % randomQuestions.length;
        }

        // å¯åŠ¨é—®é¢˜è½®æ’­ï¼ˆæ¯2ç§’åˆ‡æ¢ä¸€æ¬¡ï¼‰
        function startQuestionRotation() {
            // ç«‹å³æ˜¾ç¤ºç¬¬ä¸€ä¸ªé—®é¢˜
            showRandomQuestion();
            // æ¯2ç§’åˆ‡æ¢ä¸€æ¬¡é—®é¢˜
            setInterval(showRandomQuestion, 2000);
        }

        // å›¾æ–‡é—®è¯ŠåŠŸèƒ½
        function startTextConsultation() {
            // è§¦è§‰åé¦ˆ
            if (typeof MedicalApp !== 'undefined' && MedicalApp.HapticManager) {
                MedicalApp.HapticManager.selection();
            }

            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            if (typeof MedicalApp !== 'undefined' && MedicalApp.NotificationManager) {
                MedicalApp.NotificationManager.info('æ­£åœ¨å¯åŠ¨å›¾æ–‡é—®è¯Š...');
            }

            // æ¨¡æ‹Ÿè·³è½¬åˆ°å›¾æ–‡é—®è¯Šé¡µé¢
            setTimeout(() => {
                if (window.parent !== window) {
                    window.parent.postMessage({
                        type: 'navigate',
                        page: 'text-consultation'
                    }, '*');
                } else {
                    alert('å›¾æ–‡é—®è¯ŠåŠŸèƒ½å³å°†å¼€æ”¾ï¼Œæ•¬è¯·æœŸå¾…ï¼');
                }
            }, 500);
        }

        // è§†é¢‘é—®è¯ŠåŠŸèƒ½
        function startVideoConsultation() {
            // è§¦è§‰åé¦ˆ
            if (typeof MedicalApp !== 'undefined' && MedicalApp.HapticManager) {
                MedicalApp.HapticManager.selection();
            }

            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            if (typeof MedicalApp !== 'undefined' && MedicalApp.NotificationManager) {
                MedicalApp.NotificationManager.info('æ­£åœ¨å¯åŠ¨è§†é¢‘é—®è¯Š...');
            }

            // æ¨¡æ‹Ÿè·³è½¬åˆ°è§†é¢‘é—®è¯Šé¡µé¢
            setTimeout(() => {
                if (window.parent !== window) {
                    window.parent.postMessage({
                        type: 'navigate',
                        page: 'video-consultation'
                    }, '*');
                } else {
                    alert('è§†é¢‘é—®è¯ŠåŠŸèƒ½å³å°†å¼€æ”¾ï¼Œæ•¬è¯·æœŸå¾…ï¼');
                }
            }, 500);
        }

        // åé¦ˆå¤„ç†åŠŸèƒ½
        let feedbackState = {
            like: false,
            dislike: false
        };

        // å¤„ç†ç”¨æˆ·åé¦ˆ
        function handleFeedback(type) {
            // è§¦è§‰åé¦ˆ
            if (typeof MedicalApp !== 'undefined' && MedicalApp.HapticManager) {
                MedicalApp.HapticManager.selection();
            }

            const likeBtn = document.getElementById('likeBtn');
            const dislikeBtn = document.getElementById('dislikeBtn');

            if (type === 'like') {
                // åˆ‡æ¢ç‚¹èµçŠ¶æ€
                feedbackState.like = !feedbackState.like;
                feedbackState.dislike = false; // å–æ¶ˆä¸å–œæ¬¢çŠ¶æ€

                if (feedbackState.like) {
                    likeBtn.classList.add('active', 'like');
                    likeBtn.innerHTML = '<i class="fas fa-thumbs-up"></i>';

                    // æ˜¾ç¤ºæç¤ºä¿¡æ¯
                    if (typeof MedicalApp !== 'undefined' && MedicalApp.NotificationManager) {
                        MedicalApp.NotificationManager.success('æ„Ÿè°¢æ‚¨çš„ç‚¹èµï¼');
                    }
                } else {
                    likeBtn.classList.remove('active', 'like');
                    likeBtn.innerHTML = '<i class="far fa-thumbs-up"></i>';
                }

                dislikeBtn.classList.remove('active', 'dislike');
                dislikeBtn.innerHTML = '<i class="far fa-thumbs-down"></i>';

            } else if (type === 'dislike') {
                // åˆ‡æ¢ä¸å–œæ¬¢çŠ¶æ€
                feedbackState.dislike = !feedbackState.dislike;
                feedbackState.like = false; // å–æ¶ˆç‚¹èµçŠ¶æ€

                if (feedbackState.dislike) {
                    dislikeBtn.classList.add('active', 'dislike');
                    dislikeBtn.innerHTML = '<i class="fas fa-thumbs-down"></i>';

                    // æ˜¾ç¤ºæç¤ºä¿¡æ¯
                    if (typeof MedicalApp !== 'undefined' && MedicalApp.NotificationManager) {
                        MedicalApp.NotificationManager.info('å·²è®°å½•æ‚¨çš„åé¦ˆ');
                    }
                } else {
                    dislikeBtn.classList.remove('active', 'dislike');
                    dislikeBtn.innerHTML = '<i class="far fa-thumbs-down"></i>';
                }

                likeBtn.classList.remove('active', 'like');
                likeBtn.innerHTML = '<i class="far fa-thumbs-up"></i>';
            }
        }

      
    
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            renderReportContent(); // ç›´æ¥æ¸²æŸ“å®Œæ•´AIæ™ºèƒ½æŠ¥å‘Š
            startQuestionRotation(); // å¯åŠ¨é—®é¢˜è½®æ’­
        });
    </script>

    <!-- å…¨å±€é”™è¯¯å¤„ç† -->
    <script>
        window.addEventListener('error', function(e) {
            console.error('JavaScript Error:', e.message);
            // é˜»æ­¢é”™è¯¯å¼¹çª—ï¼Œä½†ä¸å½±å“é¡µé¢æ˜¾ç¤º
            return true;
        });

        // å®‰å…¨çš„getElementByIdåŒ…è£…å‡½æ•°
        function safeGetElement(id) {
            return document.getElementById(id);
        }

        // å®‰å…¨çš„textContentè®¾ç½®å‡½æ•°
        function safeSetText(id, text) {
            const element = document.getElementById(id);
            if (element && text !== undefined && text !== null) {
                element.textContent = text;
            }
            return element;
        }
        // å®‰å…¨çš„éœ‡åŠ¨å‡½æ•°ï¼ˆé¿å…iframeä¸­çš„è·¨åŸŸé™åˆ¶ï¼‰
        function safeVibrate(duration) {
            try {
                // æ£€æŸ¥æ˜¯å¦æ”¯æŒéœ‡åŠ¨API
                if (navigator.vibrate && window.self === window.top) {
                    navigator.vibrate(duration);
                }
            } catch (e) {
                // å¿½ç•¥éœ‡åŠ¨APIé”™è¯¯
                console.debug('Vibrate not available:', e.message);
            }
        }

    </script>
</body>
</html>