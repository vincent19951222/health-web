<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新建健康档案 - 优唐智能AI+</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* 医疗健康主题 - Web端设计系统 */

        :root {
            /* 主色调 - 专业蓝 */
            --primary-50: #eff6ff;
            --primary-100: #dbeafe;
            --primary-500: #3b82f6;
            --primary-600: #2563eb;
            --primary-700: #1d4ed8;

            /* 副色调 - 活力橙 */
            --secondary-500: #f97316;
            --secondary-600: #ea580c;

            /* 医疗状态色 */
            --success-500: #22c55e;
            --warning-500: #f59e0b;
            --danger-500: #ef4444;
            --info-500: #06b6d4;

            /* 中性色 */
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;

            /* 圆角 */
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-2xl: 24px;

            /* 阴影 */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Figtree', 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: var(--gray-800);
            background: var(--gray-50);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ========== 侧边栏样式 (复用 dashboard) ========== */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 240px;
            background: linear-gradient(180deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            display: flex;
            flex-direction: column;
            z-index: 100;
            box-shadow: var(--shadow-xl);
        }

        .sidebar-logo {
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-logo h1 {
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px 12px;
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-section-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: rgba(255, 255, 255, 0.5);
            padding: 0 12px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.2s ease;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 4px;
            text-decoration: none;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-weight: 600;
        }

        .nav-item i {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }

        .nav-item span {
            font-size: 14px;
        }

        .nav-item .badge {
            margin-left: auto;
            background: var(--danger-500);
            color: white;
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 9999px;
            font-weight: 600;
        }

        .sidebar-user {
            padding: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: background 0.2s ease;
            text-decoration: none;
            color: inherit;
        }

        .sidebar-user:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-size: 14px;
            font-weight: 600;
        }

        .user-status {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
        }

        /* ========== 主内容区域 ========== */
        .main-content {
            margin-left: 240px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* 顶部Header */
        .header {
            background: white;
            padding: 16px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--gray-200);
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .back-btn {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-600);
            cursor: pointer;
            transition: all 0.2s ease;
            background: transparent;
            border: none;
        }

        .back-btn:hover {
            background: var(--gray-100);
            color: var(--gray-800);
        }

        .page-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--gray-900);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* 进度指示器 */
        .progress-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--primary-50);
            border-radius: var(--radius-lg);
            border: 1px solid var(--primary-100);
        }

        .progress-indicator span {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-600);
        }

        .progress-ring-small {
            width: 28px;
            height: 28px;
        }

        /* 按钮样式 */
        .btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: var(--radius-lg);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
        }

        .btn-primary {
            background: var(--primary-500);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-600);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .btn-secondary {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .btn-secondary:hover {
            background: var(--gray-200);
        }

        /* 内容区域 */
        .content-wrapper {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        /* 左侧导航面板 */
        .section-nav {
            width: 280px;
            background: white;
            border-right: 1px solid var(--gray-200);
            padding: 24px 16px;
            overflow-y: auto;
            flex-shrink: 0;
        }

        .section-nav-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 12px;
            padding: 0 8px;
        }

        .section-nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--gray-600);
            margin-bottom: 4px;
        }

        .section-nav-item:hover {
            background: var(--gray-100);
            color: var(--gray-800);
        }

        .section-nav-item.active {
            background: var(--primary-50);
            color: var(--primary-600);
            font-weight: 600;
        }

        .section-nav-item.completed {
            color: var(--success-500);
        }

        .section-nav-item.completed .section-icon {
            background: #dcfce7;
            color: var(--success-500);
        }

        .section-icon {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            background: var(--gray-100);
            color: var(--gray-500);
        }

        .section-info {
            flex: 1;
        }

        .section-name {
            font-size: 14px;
            font-weight: 500;
        }

        .section-progress-text {
            font-size: 11px;
            color: var(--gray-400);
            margin-top: 2px;
        }

        /* 右侧表单区域 */
        .form-area {
            flex: 1;
            padding: 24px 32px;
            overflow-y: auto;
            background: var(--gray-50);
        }

        /* 表单卡片 */
        .form-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: 24px 32px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
            margin-bottom: 24px;
        }

        .form-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--gray-100);
        }

        .form-card-icon {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            background: var(--primary-100);
            color: var(--primary-600);
        }

        .form-card-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--gray-900);
        }

        .form-card-desc {
            font-size: 13px;
            color: var(--gray-500);
            margin-top: 2px;
        }

        /* 表单组 */
        .form-group {
            margin-bottom: 24px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 8px;
        }

        .form-label-hint {
            font-size: 12px;
            font-weight: 400;
            color: var(--gray-400);
            margin-left: 8px;
        }

        /* 输入框 */
        .form-input {
            width: 100%;
            padding: 12px 16px;
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            font-size: 15px;
            color: var(--gray-800);
            transition: all 0.2s ease;
        }

        .form-input:focus {
            background: white;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }

        .form-input::placeholder {
            color: var(--gray-400);
        }

        /* 选择框 */
        .form-select {
            width: 100%;
            padding: 12px 16px;
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            font-size: 15px;
            color: var(--gray-800);
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 40px;
        }

        .form-select:focus {
            background-color: white;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }

        /* 胶囊选项组 */
        .capsule-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .capsule-option {
            position: relative;
            cursor: pointer;
        }

        .capsule-option input {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .capsule-content {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: 9999px;
            color: var(--gray-600);
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .capsule-option input:checked + .capsule-content {
            background: #fff7ed;
            border-color: var(--secondary-500);
            color: #c2410c;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.15);
        }

        .capsule-content:hover {
            border-color: var(--gray-300);
            background: var(--gray-100);
        }

        .capsule-content i {
            font-size: 14px;
        }

        /* 网格布局 */
        .form-row {
            display: grid;
            gap: 16px;
        }

        .form-row-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .form-row-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .form-row-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        /* Tab 导航 */
        .tab-nav {
            display: flex;
            gap: 8px;
            padding: 4px;
            background: var(--gray-100);
            border-radius: var(--radius-lg);
            margin-bottom: 24px;
        }

        .tab-btn {
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--gray-600);
            background: transparent;
            border: none;
        }

        .tab-btn.active {
            background: white;
            color: var(--primary-600);
            box-shadow: var(--shadow-sm);
        }

        .tab-btn:hover:not(.active) {
            color: var(--gray-800);
        }

        /* 系统分类卡片 */
        .system-card {
            background: white;
            border-radius: var(--radius-xl);
            border: 1px solid var(--gray-200);
            margin-bottom: 16px;
            overflow: hidden;
        }

        .system-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: var(--gray-50);
            border-bottom: 1px solid var(--gray-200);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .system-card-header:hover {
            background: var(--gray-100);
        }

        .system-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .system-icon.circulatory { background: #fee2e2; color: #dc2626; }
        .system-icon.respiratory { background: #dbeafe; color: #2563eb; }
        .system-icon.immune { background: #dcfce7; color: #16a34a; }
        .system-icon.nervous { background: #f3e8ff; color: #9333ea; }
        .system-icon.motor { background: #ffedd5; color: #ea580c; }
        .system-icon.digestive { background: #fef9c3; color: #ca8a04; }
        .system-icon.endocrine { background: #fce7f3; color: #db2777; }
        .system-icon.urogenital { background: #e0e7ff; color: #4f46e5; }
        .system-icon.sensory { background: #ccfbf1; color: #0d9488; }

        .system-name {
            font-size: 15px;
            font-weight: 600;
            color: var(--gray-800);
        }

        .system-expand {
            margin-left: auto;
            color: var(--gray-400);
            transition: transform 0.2s ease;
        }

        .system-card.expanded .system-expand {
            transform: rotate(180deg);
        }

        .system-card-body {
            padding: 20px;
            display: none;
        }

        .system-card.expanded .system-card-body {
            display: block;
        }

        .subsection-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 12px;
        }

        /* 动态列表项 */
        .list-item {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: 16px;
            margin-bottom: 12px;
            position: relative;
        }

        .list-item-remove {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: white;
            border: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-400);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .list-item-remove:hover {
            background: #fef2f2;
            border-color: var(--danger-500);
            color: var(--danger-500);
        }

        .add-item-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px;
            background: white;
            border: 2px dashed var(--gray-300);
            border-radius: var(--radius-lg);
            color: var(--gray-500);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .add-item-btn:hover {
            border-color: var(--primary-400);
            color: var(--primary-600);
            background: var(--primary-50);
        }

        /* Item Card Styles */
        .item-card {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            position: relative;
        }

        .item-card-compact {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 12px;
            position: relative;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .remove-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: #fef2f2;
            border: none;
            color: #ef4444;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .remove-btn:hover {
            background: #fee2e2;
            color: #dc2626;
        }

        .remove-btn-compact {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            border-radius: 6px;
            background: transparent;
            border: none;
            color: #9ca3af;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .remove-btn-compact:hover {
            color: #ef4444;
        }

        /* Question Block */
        .question-block {
            margin-bottom: 20px;
        }

        .question-label {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
        }

        /* Modern Input */
        .modern-input {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            color: #374151;
            background: white;
            transition: all 0.2s ease;
        }

        .modern-input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.1);
        }

        .modern-input::placeholder {
            color: #9ca3af;
        }

        /* 底部操作栏 */
        .footer-actions {
            position: sticky;
            bottom: 0;
            background: white;
            border-top: 1px solid var(--gray-200);
            padding: 16px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 40;
        }

        .footer-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .footer-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* 响应式设计 */
        @media (max-width: 1200px) {
            .section-nav {
                width: 240px;
            }
        }

        @media (max-width: 1024px) {
            .section-nav {
                display: none;
            }

            .form-row-4 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 64px;
            }

            .sidebar-logo h1 span,
            .nav-section-title,
            .nav-item span,
            .user-info {
                display: none;
            }

            .sidebar-logo {
                padding: 16px;
                display: flex;
                justify-content: center;
            }

            .nav-item {
                justify-content: center;
                padding: 12px;
            }

            .sidebar-user {
                justify-content: center;
            }

            .main-content {
                margin-left: 64px;
            }

            .form-area {
                padding: 16px;
            }

            .form-card {
                padding: 20px;
            }

            .form-row-2,
            .form-row-3,
            .form-row-4 {
                grid-template-columns: 1fr;
            }

            .footer-actions {
                flex-direction: column;
                gap: 12px;
                padding: 16px;
            }

            .footer-left,
            .footer-right {
                width: 100%;
                justify-content: center;
            }
        }

        /* 动画效果 */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        /* 减少动画偏好支持 */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* 文本域 */
        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            font-size: 15px;
            color: var(--gray-800);
            transition: all 0.2s ease;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .form-textarea:focus {
            background: white;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }

        /* 隐藏类 */
        .hidden {
            display: none !important;
        }
    </style>
</head>

<body>
    <!-- 侧边栏 - 复用 dashboard 布局 -->
    <aside class="sidebar">
        <div class="sidebar-logo">
            <h1>
                <i class="fas fa-heartbeat"></i>
                <span>优唐智能AI+</span>
            </h1>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-section-title">健康监测</div>
                <a href="dashboard.html" class="nav-item">
                    <i class="fas fa-th-large"></i>
                    <span>健康概览</span>
                </a>
                <a href="blood-sugar.html" class="nav-item">
                    <i class="fas fa-tint"></i>
                    <span>血糖管理</span>
                </a>
                <a href="blood-pressure.html" class="nav-item">
                    <i class="fas fa-heart"></i>
                    <span>血压管理</span>
                </a>
                <a href="glycated.html" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span>糖化血红蛋白</span>
                </a>
                <a href="uric-acid.html" class="nav-item">
                    <i class="fas fa-flask"></i>
                    <span>尿酸检测</span>
                </a>
                <a href="blood-ketone.html" class="nav-item">
                    <i class="fas fa-burn"></i>
                    <span>血酮检测</span>
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">智能服务</div>
                <a href="ai-chat.html" class="nav-item">
                    <i class="fas fa-robot"></i>
                    <span>AI助手</span>
                    <span class="badge">新</span>
                </a>
                <a href="hospital.html" class="nav-item">
                    <i class="fas fa-hospital"></i>
                    <span>互联网医院</span>
                </a>
                <a href="devices.html" class="nav-item">
                    <i class="fas fa-microchip"></i>
                    <span>设备管理</span>
                </a>
                <a href="reports.html" class="nav-item active">
                    <i class="fas fa-file-medical-alt"></i>
                    <span>健康报告</span>
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">设置</div>
                <a href="system_settings.html" class="nav-item">
                    <i class="fas fa-cog"></i>
                    <span>系统设置</span>
                </a>
            </div>
        </nav>

        <a href="profile.html" class="sidebar-user">
            <div class="user-avatar">张</div>
            <div class="user-info">
                <div class="user-name">张先生</div>
                <div class="user-status">健康会员</div>
            </div>
        </a>
    </aside>

    <!-- 主内容区域 -->
    <main class="main-content">
        <!-- 顶部Header -->
        <header class="header">
            <div class="header-left">
                <button class="back-btn" onclick="handleBack()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div>
                    <h2 class="page-title">新建健康档案</h2>
                    <p class="text-sm text-gray-500" id="sectionTitle">完善您的健康信息，获取 AI 深度评估</p>
                </div>
            </div>
            <div class="header-right">
                <div class="progress-indicator">
                    <svg class="progress-ring-small" viewBox="0 0 36 36">
                        <circle cx="18" cy="18" r="15" fill="none" stroke="#dbeafe" stroke-width="3"></circle>
                        <circle id="progressCircle" cx="18" cy="18" r="15" fill="none" stroke="#3b82f6" stroke-width="3" stroke-linecap="round" stroke-dasharray="94.2" stroke-dashoffset="94.2" transform="rotate(-90 18 18)"></circle>
                    </svg>
                    <span id="progressText">0%</span>
                </div>
                <button class="btn btn-secondary" onclick="saveDraft()">
                    <i class="fas fa-save"></i>
                    保存草稿
                </button>
                <button class="btn btn-primary" onclick="submitProfile()">
                    <i class="fas fa-check"></i>
                    提交档案
                </button>
            </div>
        </header>

        <!-- 内容区域 -->
        <div class="content-wrapper">
            <!-- 左侧导航面板 -->
            <div class="section-nav">
                <div class="section-nav-title">档案模块</div>

                <div class="section-nav-item active" onclick="switchSection(1)">
                    <div class="section-icon">
                        <i class="fas fa-id-card-alt"></i>
                    </div>
                    <div class="section-info">
                        <div class="section-name">1. 基本信息</div>
                        <div class="section-progress-text" id="progress-1">待填写</div>
                    </div>
                </div>

                <div class="section-nav-item" onclick="switchSection(2)">
                    <div class="section-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="section-info">
                        <div class="section-name">2. 疾病信息</div>
                        <div class="section-progress-text" id="progress-2">待填写</div>
                    </div>
                </div>

                <div class="section-nav-item" onclick="switchSection(3)">
                    <div class="section-icon">
                        <i class="fas fa-box-open"></i>
                    </div>
                    <div class="section-info">
                        <div class="section-name">3. 健康工具</div>
                        <div class="section-progress-text" id="progress-3">待填写</div>
                    </div>
                </div>

                <div class="section-nav-item" onclick="switchSection(4)">
                    <div class="section-icon">
                        <i class="fas fa-capsules"></i>
                    </div>
                    <div class="section-info">
                        <div class="section-name">4. 用药信息</div>
                        <div class="section-progress-text" id="progress-4">待填写</div>
                    </div>
                </div>

                <div class="section-nav-item" onclick="switchSection(5)">
                    <div class="section-icon">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="section-info">
                        <div class="section-name">5. 健康问题</div>
                        <div class="section-progress-text" id="progress-5">待填写</div>
                    </div>
                </div>

                <div class="section-nav-item" onclick="switchSection(6)">
                    <div class="section-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="section-info">
                        <div class="section-name">6. 健康目标</div>
                        <div class="section-progress-text" id="progress-6">待填写</div>
                    </div>
                </div>

                <div class="section-nav-item" onclick="switchSection(7)">
                    <div class="section-icon">
                        <i class="fas fa-running"></i>
                    </div>
                    <div class="section-info">
                        <div class="section-name">7. 生活习惯</div>
                        <div class="section-progress-text" id="progress-7">待填写</div>
                    </div>
                </div>

                <div class="section-nav-item" onclick="switchSection(8)">
                    <div class="section-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="section-info">
                        <div class="section-name">8. 膳食调查</div>
                        <div class="section-progress-text" id="progress-8">待填写</div>
                    </div>
                </div>
            </div>

            <!-- 右侧表单区域 -->
            <div class="form-area" id="formArea">
                <!-- Section 1: 基本信息 -->
                <div id="section-1" class="section-content fade-in">
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon">
                                <i class="fas fa-id-card-alt"></i>
                            </div>
                            <div>
                                <div class="form-card-title">基本信息</div>
                                <div class="form-card-desc">建立您的数字健康身份</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">1. 性别</label>
                            <div class="capsule-group">
                                <label class="capsule-option">
                                    <input type="radio" name="gender" value="male" onchange="handleGenderChange()">
                                    <div class="capsule-content">
                                        <i class="fas fa-mars"></i>
                                        <span>男</span>
                                    </div>
                                </label>
                                <label class="capsule-option">
                                    <input type="radio" name="gender" value="female" onchange="handleGenderChange()">
                                    <div class="capsule-content">
                                        <i class="fas fa-venus"></i>
                                        <span>女</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="form-group hidden" id="pregnancyField">
                            <label class="form-label">2. 是否处于孕期/哺乳期</label>
                            <div class="capsule-group">
                                <label class="capsule-option">
                                    <input type="radio" name="pregnancy" value="no">
                                    <div class="capsule-content">
                                        <i class="fas fa-times"></i>
                                        <span>否</span>
                                    </div>
                                </label>
                                <label class="capsule-option">
                                    <input type="radio" name="pregnancy" value="yes">
                                    <div class="capsule-content">
                                        <i class="fas fa-baby"></i>
                                        <span>是</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="form-row form-row-2">
                            <div class="form-group">
                                <label class="form-label">3. 民族</label>
                                <select class="form-select" id="ethnicity">
                                    <option value="">请选择民族</option>
                                    <option value="汉族">汉族</option>
                                    <option value="蒙古族">蒙古族</option>
                                    <option value="回族">回族</option>
                                    <option value="藏族">藏族</option>
                                    <option value="维吾尔族">维吾尔族</option>
                                    <option value="苗族">苗族</option>
                                    <option value="彝族">彝族</option>
                                    <option value="壮族">壮族</option>
                                    <option value="满族">满族</option>
                                    <option value="其他">其他</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">4. 籍贯</label>
                                <input type="text" class="form-input" placeholder="请输入籍贯" id="nativePlace">
                            </div>
                        </div>

                        <div class="form-row form-row-2">
                            <div class="form-group">
                                <label class="form-label">5. 出生日期</label>
                                <input type="date" class="form-input" id="dob">
                            </div>
                            <div class="form-group">
                                <label class="form-label">6. 身份证号</label>
                                <input type="text" class="form-input" placeholder="请输入身份证号码" id="idCard" maxlength="18">
                            </div>
                        </div>

                        <div class="form-row form-row-2">
                            <div class="form-group">
                                <label class="form-label">7. 主要联系方式</label>
                                <input type="tel" class="form-input" placeholder="请输入手机号码" id="contact1">
                            </div>
                            <div class="form-group">
                                <label class="form-label">8. 备用联系方式 <span class="form-label-hint">选填</span></label>
                                <input type="tel" class="form-input" placeholder="备用联系方式" id="contact2">
                            </div>
                        </div>
                    </div>

                    <!-- 紧急联系人 -->
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon" style="background: #fef3c7; color: #d97706;">
                                <i class="fas fa-phone-alt"></i>
                            </div>
                            <div>
                                <div class="form-card-title">紧急联系人</div>
                                <div class="form-card-desc">紧急情况时的联系方式</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">第一紧急联系人</label>
                            <div class="form-row form-row-3">
                                <input type="text" class="form-input" placeholder="姓名" id="emergency1Name">
                                <select class="form-select" id="emergency1Rel">
                                    <option value="">关系</option>
                                    <option value="配偶">配偶</option>
                                    <option value="父母">父母</option>
                                    <option value="子女">子女</option>
                                    <option value="兄弟姐妹">兄弟姐妹</option>
                                    <option value="其他">其他</option>
                                </select>
                                <input type="tel" class="form-input" placeholder="联系电话" id="emergency1Phone">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">第二紧急联系人 <span class="form-label-hint">选填</span></label>
                            <div class="form-row form-row-3">
                                <input type="text" class="form-input" placeholder="姓名" id="emergency2Name">
                                <select class="form-select" id="emergency2Rel">
                                    <option value="">关系</option>
                                    <option value="配偶">配偶</option>
                                    <option value="父母">父母</option>
                                    <option value="子女">子女</option>
                                    <option value="兄弟姐妹">兄弟姐妹</option>
                                    <option value="其他">其他</option>
                                </select>
                                <input type="tel" class="form-input" placeholder="联系电话" id="emergency2Phone">
                            </div>
                        </div>
                    </div>

                    <!-- 地址与生活信息 -->
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon" style="background: #dcfce7; color: #16a34a;">
                                <i class="fas fa-home"></i>
                            </div>
                            <div>
                                <div class="form-card-title">地址与生活信息</div>
                                <div class="form-card-desc">居住地址及生活状况</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">家庭住址 <span class="form-label-hint">居住6个月以上</span></label>
                            <div class="form-row form-row-2" style="margin-bottom: 8px;">
                                <input type="text" class="form-input" placeholder="省/自治区" id="addressProvince">
                                <input type="text" class="form-input" placeholder="市" id="addressCity">
                            </div>
                            <div class="form-row form-row-2">
                                <input type="text" class="form-input" placeholder="区/县" id="addressDistrict">
                                <input type="text" class="form-input" placeholder="街道/乡镇" id="addressStreet">
                            </div>
                        </div>

                        <div class="form-row form-row-2">
                            <div class="form-group">
                                <label class="form-label">婚姻状况</label>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="marital" value="unmarried">
                                        <div class="capsule-content"><span>未婚</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="marital" value="married">
                                        <div class="capsule-content"><span>已婚</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="marital" value="divorced">
                                        <div class="capsule-content"><span>离异</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="marital" value="widowed">
                                        <div class="capsule-content"><span>丧偶</span></div>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">居住情况</label>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="living" value="alone">
                                        <div class="capsule-content"><span>独居</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="living" value="spouse">
                                        <div class="capsule-content"><span>夫妻同住</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="living" value="children">
                                        <div class="capsule-content"><span>与儿女合住</span></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-row form-row-2">
                            <div class="form-group">
                                <label class="form-label">文化程度</label>
                                <select class="form-select" id="education">
                                    <option value="">请选择</option>
                                    <option value="none">未上学</option>
                                    <option value="primary">小学</option>
                                    <option value="junior">初中</option>
                                    <option value="senior">高中/中专</option>
                                    <option value="college">大专/本科</option>
                                    <option value="graduate">研究生及以上</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">任职状态</label>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="employment" value="employed">
                                        <div class="capsule-content"><span>在职</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="employment" value="retired">
                                        <div class="capsule-content"><span>离退休</span></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-row form-row-2">
                            <div class="form-group">
                                <label class="form-label">工作单位及岗位</label>
                                <input type="text" class="form-input" placeholder="请输入单位及岗位" id="workUnit">
                            </div>
                            <div class="form-group">
                                <label class="form-label">月收入范围</label>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="income" value="l2000">
                                        <div class="capsule-content"><span>≤2000</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="income" value="2000_4000">
                                        <div class="capsule-content"><span>2k-4k</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="income" value="4000_8000">
                                        <div class="capsule-content"><span>4k-8k</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="income" value="gt8000">
                                        <div class="capsule-content"><span>>8k</span></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 2: 疾病信息 -->
                <div id="section-2" class="section-content hidden">
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon" style="background: #fee2e2; color: #dc2626;">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <div>
                                <div class="form-card-title">疾病信息</div>
                                <div class="form-card-desc">既往病史、过敏史、手术史及家族史</div>
                            </div>
                        </div>

                        <!-- Tab 导航 -->
                        <div class="tab-nav">
                            <button class="tab-btn active" onclick="switchDiseaseTab(0)">既往病史</button>
                            <button class="tab-btn" onclick="switchDiseaseTab(1)">过敏史</button>
                            <button class="tab-btn" onclick="switchDiseaseTab(2)">手术与外伤</button>
                            <button class="tab-btn" onclick="switchDiseaseTab(3)">家族史</button>
                        </div>

                        <!-- 既往病史 Tab -->
                        <div id="disease-tab-0" class="disease-tab-content">
                            <!-- 循环系统 -->
                            <div class="system-card expanded">
                                <div class="system-card-header" onclick="toggleSystemCard(this)">
                                    <div class="system-icon circulatory">
                                        <i class="fas fa-heartbeat"></i>
                                    </div>
                                    <div class="system-name">循环系统</div>
                                    <i class="fas fa-chevron-down system-expand"></i>
                                </div>
                                <div class="system-card-body">
                                    <div class="subsection-title">诊断疾病</div>
                                    <div class="capsule-group" style="margin-bottom: 16px;">
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_diseases" value="高血压"><div class="capsule-content"><span>高血压</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_diseases" value="脑卒中"><div class="capsule-content"><span>脑卒中</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_diseases" value="心肌缺血"><div class="capsule-content"><span>心肌缺血</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_diseases" value="冠心病"><div class="capsule-content"><span>冠心病</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_diseases" value="动脉粥样硬化"><div class="capsule-content"><span>动脉粥样硬化</span></div></label>
                                    </div>
                                    <input type="text" class="form-input" placeholder="其他疾病...">

                                    <div class="subsection-title" style="margin-top: 16px;">自觉症状</div>
                                    <div class="capsule-group">
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_symptoms" value="头痛"><div class="capsule-content"><span>头痛</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_symptoms" value="头晕"><div class="capsule-content"><span>头晕</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_symptoms" value="心慌"><div class="capsule-content"><span>心慌</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_symptoms" value="胸闷"><div class="capsule-content"><span>胸闷</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="circulatory_symptoms" value="心悸"><div class="capsule-content"><span>心悸</span></div></label>
                                    </div>
                                </div>
                            </div>

                            <!-- 呼吸系统 -->
                            <div class="system-card">
                                <div class="system-card-header" onclick="toggleSystemCard(this)">
                                    <div class="system-icon respiratory">
                                        <i class="fas fa-lungs"></i>
                                    </div>
                                    <div class="system-name">呼吸系统</div>
                                    <i class="fas fa-chevron-down system-expand"></i>
                                </div>
                                <div class="system-card-body">
                                    <div class="subsection-title">诊断疾病</div>
                                    <div class="capsule-group" style="margin-bottom: 16px;">
                                        <label class="capsule-option"><input type="checkbox" name="respiratory_diseases" value="老慢支"><div class="capsule-content"><span>老慢支</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="respiratory_diseases" value="肺气肿"><div class="capsule-content"><span>肺气肿</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="respiratory_diseases" value="哮喘"><div class="capsule-content"><span>哮喘</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="respiratory_diseases" value="慢阻肺"><div class="capsule-content"><span>慢阻肺</span></div></label>
                                    </div>
                                    <input type="text" class="form-input" placeholder="其他疾病...">
                                </div>
                            </div>

                            <!-- 内分泌系统 -->
                            <div class="system-card">
                                <div class="system-card-header" onclick="toggleSystemCard(this)">
                                    <div class="system-icon endocrine">
                                        <i class="fas fa-dna"></i>
                                    </div>
                                    <div class="system-name">内分泌系统</div>
                                    <i class="fas fa-chevron-down system-expand"></i>
                                </div>
                                <div class="system-card-body">
                                    <div class="subsection-title">诊断疾病</div>
                                    <div class="capsule-group" style="margin-bottom: 16px;">
                                        <label class="capsule-option"><input type="checkbox" name="endocrine_diseases" value="糖尿病"><div class="capsule-content"><span>糖尿病</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="endocrine_diseases" value="血脂异常"><div class="capsule-content"><span>血脂异常</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="endocrine_diseases" value="痛风"><div class="capsule-content"><span>痛风/高尿酸</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="endocrine_diseases" value="甲亢"><div class="capsule-content"><span>甲亢</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="endocrine_diseases" value="甲减"><div class="capsule-content"><span>甲减</span></div></label>
                                    </div>
                                    <input type="text" class="form-input" placeholder="其他疾病...">
                                </div>
                            </div>

                            <!-- 运动系统 -->
                            <div class="system-card">
                                <div class="system-card-header" onclick="toggleSystemCard(this)">
                                    <div class="system-icon motor">
                                        <i class="fas fa-bone"></i>
                                    </div>
                                    <div class="system-name">运动系统</div>
                                    <i class="fas fa-chevron-down system-expand"></i>
                                </div>
                                <div class="system-card-body">
                                    <div class="subsection-title">诊断疾病</div>
                                    <div class="capsule-group" style="margin-bottom: 16px;">
                                        <label class="capsule-option"><input type="checkbox" name="motor_diseases" value="骨质疏松"><div class="capsule-content"><span>骨质疏松</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="motor_diseases" value="关节炎"><div class="capsule-content"><span>关节炎</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="motor_diseases" value="颈椎病"><div class="capsule-content"><span>颈椎病</span></div></label>
                                        <label class="capsule-option"><input type="checkbox" name="motor_diseases" value="腰椎病"><div class="capsule-content"><span>腰椎病</span></div></label>
                                    </div>
                                    <input type="text" class="form-input" placeholder="其他疾病...">
                                </div>
                            </div>
                        </div>

                        <!-- 过敏史 Tab -->
                        <div id="disease-tab-1" class="disease-tab-content hidden">
                            <div class="form-group">
                                <label class="form-label">过敏史 <span class="form-label-hint">选择所有已知的过敏源</span></label>
                                <div class="capsule-group">
                                    <label class="capsule-option"><input type="checkbox" name="allergies" value="青霉素"><div class="capsule-content"><span>青霉素</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="allergies" value="头孢"><div class="capsule-content"><span>头孢菌素类</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="allergies" value="花粉"><div class="capsule-content"><span>花粉</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="allergies" value="海鲜"><div class="capsule-content"><span>海鲜</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="allergies" value="牛奶"><div class="capsule-content"><span>牛奶</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="allergies" value="鸡蛋"><div class="capsule-content"><span>鸡蛋</span></div></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">其他过敏源</label>
                                <input type="text" class="form-input" placeholder="请输入其他过敏源...">
                            </div>
                        </div>

                        <!-- 手术与外伤 Tab -->
                        <div id="disease-tab-2" class="disease-tab-content hidden">
                            <div class="form-group">
                                <label class="form-label">是否有既往手术史</label>
                                <div class="capsule-group" style="margin-bottom: 16px;">
                                    <label class="capsule-option"><input type="radio" name="has_surgery" value="no" onchange="toggleSurgeryList(false)"><div class="capsule-content"><span>无</span></div></label>
                                    <label class="capsule-option"><input type="radio" name="has_surgery" value="yes" onchange="toggleSurgeryList(true)"><div class="capsule-content"><span>有</span></div></label>
                                </div>
                                <div id="surgeryList" class="hidden">
                                    <div class="list-item">
                                        <button class="list-item-remove"><i class="fas fa-times"></i></button>
                                        <div class="form-row form-row-2">
                                            <input type="text" class="form-input" placeholder="手术名称">
                                            <input type="month" class="form-input">
                                        </div>
                                    </div>
                                    <button class="add-item-btn">
                                        <i class="fas fa-plus"></i>
                                        添加手术记录
                                    </button>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">是否有既往外伤史</label>
                                <div class="capsule-group" style="margin-bottom: 16px;">
                                    <label class="capsule-option"><input type="radio" name="has_trauma" value="no" onchange="toggleTraumaList(false)"><div class="capsule-content"><span>无</span></div></label>
                                    <label class="capsule-option"><input type="radio" name="has_trauma" value="yes" onchange="toggleTraumaList(true)"><div class="capsule-content"><span>有</span></div></label>
                                </div>
                                <div id="traumaList" class="hidden">
                                    <div class="list-item">
                                        <button class="list-item-remove"><i class="fas fa-times"></i></button>
                                        <div class="form-row form-row-2">
                                            <input type="text" class="form-input" placeholder="外伤名称">
                                            <input type="month" class="form-input">
                                        </div>
                                    </div>
                                    <button class="add-item-btn">
                                        <i class="fas fa-plus"></i>
                                        添加外伤记录
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 家族史 Tab -->
                        <div id="disease-tab-3" class="disease-tab-content hidden">
                            <div class="form-group">
                                <label class="form-label">疾病家族史 <span class="form-label-hint">直系亲属（父母、兄弟姐妹、子女）</span></label>
                                <div class="capsule-group">
                                    <label class="capsule-option"><input type="checkbox" name="family_history" value="糖尿病"><div class="capsule-content"><span>糖尿病</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="family_history" value="高血压"><div class="capsule-content"><span>高血压</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="family_history" value="脑卒中"><div class="capsule-content"><span>脑卒中</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="family_history" value="冠心病"><div class="capsule-content"><span>冠心病</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="family_history" value="痛风"><div class="capsule-content"><span>痛风</span></div></label>
                                    <label class="capsule-option"><input type="checkbox" name="family_history" value="血脂异常"><div class="capsule-content"><span>血脂异常</span></div></label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 5: 健康问题 -->
                <div id="section-5" class="section-content hidden">
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon" style="background: #fef3c7; color: #d97706;">
                                <i class="fas fa-exclamation-circle"></i>
                            </div>
                            <div>
                                <div class="form-card-title">当前最关注的健康问题</div>
                                <div class="form-card-desc">描述您目前最关心的健康困扰</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <textarea class="form-textarea" placeholder="例如：最近睡眠不好，血糖波动大，体重控制困难..." rows="6" id="healthConcerns"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Section 6: 健康目标 -->
                <div id="section-6" class="section-content hidden">
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon" style="background: #e0e7ff; color: #4f46e5;">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <div>
                                <div class="form-card-title">期望的健康目标</div>
                                <div class="form-card-desc">描述您希望达到的健康状态</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <textarea class="form-textarea" placeholder="例如：希望三个月内减重5斤，血糖控制在6.5以下..." rows="6" id="healthGoals"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Section 3: 健康工具 -->
                <div id="section-3" class="section-content hidden">
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon" style="background: #dcfce7; color: #16a34a;">
                                <i class="fas fa-box-open"></i>
                            </div>
                            <div>
                                <div class="form-card-title">健康工具</div>
                                <div class="form-card-desc">保健品及健康器械使用信息</div>
                            </div>
                        </div>

                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-info-circle text-green-500"></i>
                                健康产品及健康工具的使用信息
                            </div>
                            <p class="text-sm text-gray-500 mb-4">最近三个月，您是否使用过健康产品及健康工具，如保健食品、功能营养品以及健康工具等。（若近三个月未使用过请跳至下一题作答）</p>

                            <div class="capsule-group">
                                <label class="capsule-option">
                                    <input type="radio" name="has_health_products" value="no" onchange="toggleHealthProducts(false)" checked>
                                    <div class="capsule-content">
                                        <i class="fas fa-times"></i>
                                        <span>未曾使用</span>
                                    </div>
                                </label>
                                <label class="capsule-option">
                                    <input type="radio" name="has_health_products" value="yes" onchange="toggleHealthProducts(true)">
                                    <div class="capsule-content">
                                        <i class="fas fa-check"></i>
                                        <span>有使用</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- 产品列表 -->
                        <div id="healthProductsContainer" class="hidden mt-6">
                            <div id="healthProductsList"></div>
                            <button type="button" class="add-item-btn" onclick="addHealthProduct()">
                                <i class="fas fa-plus"></i>
                                添加产品/工具
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Section 4: 用药信息 -->
                <div id="section-4" class="section-content hidden">
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon" style="background: #dbeafe; color: #2563eb;">
                                <i class="fas fa-capsules"></i>
                            </div>
                            <div>
                                <div class="form-card-title">用药信息</div>
                                <div class="form-card-desc">当前服用的药物</div>
                            </div>
                        </div>

                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-pills text-blue-500"></i>
                                用药信息
                            </div>
                            <p class="text-sm text-gray-500 mb-4">最近一个月，您是否使用过药物。（若近一个月未使用过药物请跳至下一题作答）</p>

                            <div class="capsule-group">
                                <label class="capsule-option">
                                    <input type="radio" name="has_medication" value="no" onchange="toggleMedication(false)" checked>
                                    <div class="capsule-content">
                                        <i class="fas fa-times"></i>
                                        <span>未曾使用</span>
                                    </div>
                                </label>
                                <label class="capsule-option">
                                    <input type="radio" name="has_medication" value="yes" onchange="toggleMedication(true)">
                                    <div class="capsule-content">
                                        <i class="fas fa-check"></i>
                                        <span>有使用</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- 药物列表 -->
                        <div id="medicationContainer" class="hidden mt-6">
                            <div id="medicationList"></div>
                            <button type="button" class="add-item-btn" onclick="addMedication()">
                                <i class="fas fa-plus"></i>
                                添加药物
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Section 7: 生活行为习惯 -->
                <div id="section-7" class="section-content hidden">
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon" style="background: #f3e8ff; color: #9333ea;">
                                <i class="fas fa-running"></i>
                            </div>
                            <div>
                                <div class="form-card-title">生活行为习惯</div>
                                <div class="form-card-desc">吸烟、饮酒、运动习惯</div>
                            </div>
                        </div>

                        <!-- 吸烟史 -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-smoking text-purple-500"></i>
                                1. 吸烟史
                            </div>

                            <div class="question-block">
                                <div class="question-label">Q1: 最近三个月，您是否主动吸烟？</div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="smoking_status" value="never" onchange="toggleSmokingDetails('never')">
                                        <div class="capsule-content"><span>① 从不吸烟</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="smoking_status" value="current" onchange="toggleSmokingDetails('current')">
                                        <div class="capsule-content"><span>② 现在吸烟</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="smoking_status" value="quit" onchange="toggleSmokingDetails('quit')">
                                        <div class="capsule-content"><span>③ 已经戒烟</span></div>
                                    </label>
                                </div>
                                <div id="smokingDetails" class="hidden mt-4 p-4 bg-gray-50 rounded-xl border border-gray-200">
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-1">平均每天吸烟(支)</label>
                                            <input type="number" class="modern-input" placeholder="请输入">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-1">烟龄(年)</label>
                                            <input type="number" class="modern-input" placeholder="请输入">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="question-block">
                                <div class="question-label">Q2: 最近三个月，您是否被动吸烟？</div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="passive_smoking" value="none" onchange="togglePassiveSmokingDetails('none')">
                                        <div class="capsule-content"><span>① 基本没有 (&lt;15分钟/天)</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="passive_smoking" value="yes" onchange="togglePassiveSmokingDetails('yes')">
                                        <div class="capsule-content"><span>② 是的</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="passive_smoking" value="past" onchange="togglePassiveSmokingDetails('past')">
                                        <div class="capsule-content"><span>③ 既往是</span></div>
                                    </label>
                                </div>
                                <div id="passiveSmokingDetails" class="hidden mt-4 p-4 bg-gray-50 rounded-xl border border-gray-200">
                                    <label class="block text-sm font-medium text-gray-600 mb-1">平均每天被动吸烟(小时)</label>
                                    <input type="number" class="modern-input w-48" placeholder="请输入">
                                </div>
                            </div>
                        </div>

                        <!-- 饮酒史 -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-wine-bottle text-purple-500"></i>
                                2. 饮酒史
                            </div>

                            <div class="question-block">
                                <div class="question-label">Q1: 最近三个月，您是否饮酒？</div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="drinking_status" value="never" onchange="toggleDrinkingDetails('never')">
                                        <div class="capsule-content"><span>① 从不喝酒</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="drinking_status" value="current" onchange="toggleDrinkingDetails('current')">
                                        <div class="capsule-content"><span>② 现在饮酒</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="drinking_status" value="quit" onchange="toggleDrinkingDetails('quit')">
                                        <div class="capsule-content"><span>③ 已经戒酒</span></div>
                                    </label>
                                </div>
                                <div id="drinkingDetails" class="hidden mt-4 p-4 bg-gray-50 rounded-xl border border-gray-200">
                                    <div class="grid grid-cols-3 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-1">每周(次)</label>
                                            <input type="number" class="modern-input" placeholder="请输入">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-1">每次(mL)</label>
                                            <input type="number" class="modern-input" placeholder="请输入">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-1">酒龄(年)</label>
                                            <input type="number" class="modern-input" placeholder="请输入">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="question-block">
                                <div class="question-label">Q2: (多选) 最近三个月，您主要喝什么酒？</div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="checkbox" name="alcohol_type" value="white">
                                        <div class="capsule-content"><span>① 白酒</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="alcohol_type" value="red">
                                        <div class="capsule-content"><span>② 红酒</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="alcohol_type" value="beer">
                                        <div class="capsule-content"><span>③ 啤酒</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="alcohol_type" value="rice">
                                        <div class="capsule-content"><span>④ 米酒</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="alcohol_type" value="other">
                                        <div class="capsule-content"><span>⑤ 其它</span></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 运动史 -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-dumbbell text-purple-500"></i>
                                3. 运动史
                            </div>

                            <div class="question-block">
                                <div class="question-label">Q1: 最近三个月，您是否有锻炼习惯？</div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="exercise_habit" value="no" onchange="toggleExerciseDetails(false)">
                                        <div class="capsule-content"><span>① 否</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="exercise_habit" value="yes" onchange="toggleExerciseDetails(true)">
                                        <div class="capsule-content"><span>② 是</span></div>
                                    </label>
                                </div>

                                <div id="exerciseDetails" class="hidden mt-4">
                                    <div class="p-4 bg-gray-50 rounded-xl border border-gray-200 mb-4">
                                        <label class="block text-sm font-medium text-gray-600 mb-1">您保持锻炼习惯已经(年)</label>
                                        <input type="number" class="modern-input w-48" placeholder="请输入">
                                    </div>

                                    <div class="question-label mb-3">Q2: 最近三个月，您的锻炼方式、频率、时长是？</div>
                                    <div id="exerciseTypesList"></div>
                                    <button type="button" class="add-item-btn" onclick="addExerciseType()">
                                        <i class="fas fa-plus"></i>
                                        添加锻炼方式
                                    </button>

                                    <div class="mt-6">
                                        <div class="question-label mb-3">Q3: (多选) 最近三个月，您锻炼时间段一般为？</div>
                                        <div class="capsule-group">
                                            <label class="capsule-option">
                                                <input type="checkbox" name="exercise_time" value="morning">
                                                <div class="capsule-content"><span>A 早上(早餐前)</span></div>
                                            </label>
                                            <label class="capsule-option">
                                                <input type="checkbox" name="exercise_time" value="forenoon">
                                                <div class="capsule-content"><span>B 上午(早中餐间)</span></div>
                                            </label>
                                            <label class="capsule-option">
                                                <input type="checkbox" name="exercise_time" value="afternoon">
                                                <div class="capsule-content"><span>C 下午(中晚餐间)</span></div>
                                            </label>
                                            <label class="capsule-option">
                                                <input type="checkbox" name="exercise_time" value="night">
                                                <div class="capsule-content"><span>D 晚上(晚餐后)</span></div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 8: 膳食调查 -->
                <div id="section-8" class="section-content hidden">
                    <div class="form-card">
                        <div class="form-card-header">
                            <div class="form-card-icon" style="background: #ffedd5; color: #ea580c;">
                                <i class="fas fa-utensils"></i>
                            </div>
                            <div>
                                <div class="form-card-title">膳食调查</div>
                                <div class="form-card-desc">饮食习惯分析</div>
                            </div>
                        </div>

                        <!-- 早餐安排 -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-sun text-orange-500"></i>
                                早餐习惯
                            </div>
                            <div class="question-block">
                                <div class="question-label">1. 最近三个月，您的早餐通常怎么安排？<span class="text-xs text-gray-400 ml-2">(指平均频率 ≥ 4次/周)</span></div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="breakfast_type" value="skip" onchange="toggleBreakfastComp(false)">
                                        <div class="capsule-content"><span>① 基本不吃</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="breakfast_type" value="out" onchange="toggleBreakfastComp(true)">
                                        <div class="capsule-content"><span>② 在外就餐(含外卖)</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="breakfast_type" value="cook" onchange="toggleBreakfastComp(true)">
                                        <div class="capsule-content"><span>③ 自己烹饪</span></div>
                                    </label>
                                </div>
                            </div>

                            <div id="breakfastCompSection" class="question-block hidden">
                                <div class="question-label">2. (多选) 早餐常如何搭配？<span class="text-xs text-gray-400 ml-2">(指平均频率 ≥ 4次/周)</span></div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="checkbox" name="breakfast_comp" value="grain">
                                        <div class="capsule-content"><i class="fas fa-bread-slice"></i><span>谷薯类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="breakfast_comp" value="veg_fruit">
                                        <div class="capsule-content"><i class="fas fa-carrot"></i><span>蔬菜、水果类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="breakfast_comp" value="meat_egg">
                                        <div class="capsule-content"><i class="fas fa-drumstick-bite"></i><span>动物性食物</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="breakfast_comp" value="milk">
                                        <div class="capsule-content"><i class="fas fa-cheese"></i><span>奶及奶制品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="breakfast_comp" value="bean">
                                        <div class="capsule-content"><i class="fas fa-seedling"></i><span>大豆类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="breakfast_comp" value="nut">
                                        <div class="capsule-content"><i class="fas fa-cookie"></i><span>坚果类</span></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 午餐/晚餐 -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-utensils text-orange-500"></i>
                                午餐与晚餐
                            </div>
                            <div class="question-block">
                                <div class="question-label">3. (多选) 午餐常如何搭配？<span class="text-xs text-gray-400 ml-2">(指平均频率 ≥ 4次/周)</span></div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="checkbox" name="lunch_comp" value="grain">
                                        <div class="capsule-content"><i class="fas fa-bread-slice"></i><span>谷薯类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="lunch_comp" value="veg_fruit">
                                        <div class="capsule-content"><i class="fas fa-carrot"></i><span>蔬菜、水果类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="lunch_comp" value="meat_egg">
                                        <div class="capsule-content"><i class="fas fa-drumstick-bite"></i><span>动物性食物</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="lunch_comp" value="milk">
                                        <div class="capsule-content"><i class="fas fa-cheese"></i><span>奶及奶制品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="lunch_comp" value="bean">
                                        <div class="capsule-content"><i class="fas fa-seedling"></i><span>大豆类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="lunch_comp" value="nut">
                                        <div class="capsule-content"><i class="fas fa-cookie"></i><span>坚果类</span></div>
                                    </label>
                                </div>
                            </div>

                            <div class="question-block">
                                <div class="question-label">4. (多选) 晚餐常如何搭配？<span class="text-xs text-gray-400 ml-2">(指平均频率 ≥ 4次/周)</span></div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="checkbox" name="dinner_comp" value="grain">
                                        <div class="capsule-content"><i class="fas fa-bread-slice"></i><span>谷薯类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="dinner_comp" value="veg_fruit">
                                        <div class="capsule-content"><i class="fas fa-carrot"></i><span>蔬菜、水果类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="dinner_comp" value="meat_egg">
                                        <div class="capsule-content"><i class="fas fa-drumstick-bite"></i><span>动物性食物</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="dinner_comp" value="milk">
                                        <div class="capsule-content"><i class="fas fa-cheese"></i><span>奶及奶制品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="dinner_comp" value="bean">
                                        <div class="capsule-content"><i class="fas fa-seedling"></i><span>大豆类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="dinner_comp" value="nut">
                                        <div class="capsule-content"><i class="fas fa-cookie"></i><span>坚果类</span></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 加餐习惯 -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-moon text-orange-500"></i>
                                加餐习惯
                            </div>
                            <div class="question-block">
                                <div class="question-label">5. 最近三个月，您是否经常晚餐后加餐？<span class="text-xs text-gray-400 ml-2">(指平均频率 ≥ 1次/周)</span></div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="snack_habit" value="no" onchange="toggleSnackDetails(false)">
                                        <div class="capsule-content"><span>① 否</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="snack_habit" value="yes" onchange="toggleSnackDetails(true)">
                                        <div class="capsule-content"><span>② 是</span></div>
                                    </label>
                                </div>

                                <div id="snackDetails" class="hidden mt-4 p-4 bg-gray-50 rounded-xl border border-gray-200">
                                    <div class="grid grid-cols-2 gap-4 mb-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-1">通常加餐时间</label>
                                            <div class="flex items-center gap-2">
                                                <input type="number" class="modern-input w-20 text-center" placeholder="点">
                                                <span class="text-gray-400">:</span>
                                                <input type="number" class="modern-input w-20 text-center" placeholder="分">
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-1">平均频率(次/周)</label>
                                            <input type="number" class="modern-input" placeholder="请输入">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="snackCompSection" class="question-block hidden">
                                <div class="question-label">6. (多选) 加餐常如何搭配？<span class="text-xs text-gray-400 ml-2">(指平均频率 ≥ 4次/周)</span></div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="checkbox" name="snack_comp" value="grain">
                                        <div class="capsule-content"><i class="fas fa-bread-slice"></i><span>谷薯类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="snack_comp" value="veg_fruit">
                                        <div class="capsule-content"><i class="fas fa-carrot"></i><span>蔬菜、水果类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="snack_comp" value="meat_egg">
                                        <div class="capsule-content"><i class="fas fa-drumstick-bite"></i><span>动物性食物</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="snack_comp" value="milk">
                                        <div class="capsule-content"><i class="fas fa-cheese"></i><span>奶及奶制品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="snack_comp" value="bean">
                                        <div class="capsule-content"><i class="fas fa-seedling"></i><span>大豆类</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="snack_comp" value="nut">
                                        <div class="capsule-content"><i class="fas fa-cookie"></i><span>坚果类</span></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 饮食规律 -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-clock text-orange-500"></i>
                                饮食规律
                            </div>
                            <div class="question-block">
                                <div class="question-label">7. 最近三个月，您一日三餐能够按时吗？<span class="text-xs text-gray-400 ml-2">(早餐6:30~8:30，午餐11:30~13:30，晚餐18:00~20:00)</span></div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="meal_regularity" value="always">
                                        <div class="capsule-content"><span>① 按时 (7天/周)</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="meal_regularity" value="mostly">
                                        <div class="capsule-content"><span>② 基本按时 (4~6天/周)</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="meal_regularity" value="sometimes">
                                        <div class="capsule-content"><span>③ 有时按时 (1~3天/周)</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="meal_regularity" value="rarely">
                                        <div class="capsule-content"><span>④ 很少按时 (&lt;1天/周)</span></div>
                                    </label>
                                </div>
                            </div>

                            <div class="question-block">
                                <div class="question-label">8. 用餐时长 (分钟)</div>
                                <div class="grid grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-600 mb-1">早餐</label>
                                        <input type="number" class="modern-input text-center" placeholder="分钟">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-600 mb-1">午餐</label>
                                        <input type="number" class="modern-input text-center" placeholder="分钟">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-600 mb-1">晚餐</label>
                                        <input type="number" class="modern-input text-center" placeholder="分钟">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 不良饮食习惯 -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                不良饮食习惯
                            </div>
                            <div class="question-block">
                                <div class="question-label">9. (多选) 最近三个月，您是否经常食用如下食品？<span class="text-xs text-gray-400 ml-2">(指平均食用频率≥4次/周)</span></div>
                                <div class="capsule-group flex-wrap">
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="fried">
                                        <div class="capsule-content"><span>① 油炸食品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="bbq">
                                        <div class="capsule-content"><span>② 熏烧烤食品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="cured">
                                        <div class="capsule-content"><span>③ 腌腊食品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="sauced">
                                        <div class="capsule-content"><span>④ 酱卤食品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="sausage">
                                        <div class="capsule-content"><span>⑤ 火腿肠</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="instant">
                                        <div class="capsule-content"><span>⑥ 方便米面制品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="cookie">
                                        <div class="capsule-content"><span>⑦ 饼干</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="puffed">
                                        <div class="capsule-content"><span>⑧ 膨化食品</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="preserved">
                                        <div class="capsule-content"><span>⑨ 果脯/蜜饯</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="spicy_strip">
                                        <div class="capsule-content"><span>⑩ 辣条</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="unhealthy_food" value="sugary_drink">
                                        <div class="capsule-content"><span>⑪ 含糖或碳酸饮料</span></div>
                                    </label>
                                </div>
                            </div>

                            <div class="question-block">
                                <div class="question-label">10. (多选) 食品常经过以下哪种烹饪？<span class="text-xs text-gray-400 ml-2">(指平均频率≥4次/周)</span></div>
                                <div class="capsule-group flex-wrap">
                                    <label class="capsule-option">
                                        <input type="checkbox" name="cooking_method" value="fried_pan">
                                        <div class="capsule-content"><span>① 煎炸</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="cooking_method" value="boiled">
                                        <div class="capsule-content"><span>② 烧煮</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="cooking_method" value="stewed">
                                        <div class="capsule-content"><span>③ 炖煨</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="cooking_method" value="stir_fried">
                                        <div class="capsule-content"><span>④ 爆炒</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="cooking_method" value="smoked">
                                        <div class="capsule-content"><span>⑤ 熏烧烤</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="cooking_method" value="steamed">
                                        <div class="capsule-content"><span>⑥ 蒸汆</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="cooking_method" value="cured_cook">
                                        <div class="capsule-content"><span>⑦ 腌腊</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="cooking_method" value="sauced_cook">
                                        <div class="capsule-content"><span>⑧ 酱卤</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="checkbox" name="cooking_method" value="other">
                                        <div class="capsule-content"><span>⑨ 其它</span></div>
                                    </label>
                                </div>
                                <input type="text" class="modern-input mt-3" placeholder="其它烹饪方式...">
                            </div>
                        </div>

                        <!-- 外食与饮水 -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-store text-orange-500"></i>
                                外食与饮水
                            </div>
                            <div class="question-block">
                                <div class="question-label">11. 最近三个月，您平均一周在外就餐次数为？<span class="text-xs text-gray-400 ml-2">(每餐算一次)</span></div>
                                <div class="capsule-group">
                                    <label class="capsule-option">
                                        <input type="radio" name="eating_out_freq" value="lt1">
                                        <div class="capsule-content"><span>① 少于1次</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="eating_out_freq" value="1_6">
                                        <div class="capsule-content"><span>② 1~6次</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="eating_out_freq" value="7_13">
                                        <div class="capsule-content"><span>③ 7~13次</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="eating_out_freq" value="14_21">
                                        <div class="capsule-content"><span>④ 14~21次</span></div>
                                    </label>
                                    <label class="capsule-option">
                                        <input type="radio" name="eating_out_freq" value="gt21">
                                        <div class="capsule-content"><span>⑤ ＞21次</span></div>
                                    </label>
                                </div>
                            </div>

                            <div class="question-block">
                                <div class="question-label">12. 最近三个月，您平均每日总饮水量约为？<span class="text-xs text-gray-400 ml-2">(参照常规一次性纸杯约200mL)</span></div>
                                <div class="flex items-center gap-3">
                                    <input type="number" class="modern-input flex-1 max-w-xs" placeholder="请输入饮水量">
                                    <span class="text-gray-500 font-medium">mL</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 底部操作栏 -->
        <div class="footer-actions">
            <div class="footer-left">
                <button class="btn btn-secondary" onclick="prevSection()">
                    <i class="fas fa-arrow-left"></i>
                    上一节
                </button>
            </div>
            <div class="footer-right">
                <button class="btn btn-secondary" onclick="saveDraft()">
                    <i class="fas fa-save"></i>
                    保存草稿
                </button>
                <button class="btn btn-primary" onclick="nextSection()">
                    下一节
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </main>

    <script>
        // ========== 状态管理 ==========
        let currentSection = 1;
        let currentDiseaseTab = 0;
        const totalSections = 8;

        const sectionTitles = {
            1: '基本信息',
            2: '疾病信息',
            3: '健康工具',
            4: '用药信息',
            5: '健康问题',
            6: '健康目标',
            7: '生活习惯',
            8: '膳食调查'
        };

        // ========== 模块切换 ==========
        function switchSection(id) {
            currentSection = id;

            // 更新导航状态
            document.querySelectorAll('.section-nav-item').forEach((item, index) => {
                item.classList.toggle('active', index + 1 === id);
            });

            // 切换内容显示
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            const targetSection = document.getElementById(`section-${id}`);
            if (targetSection) {
                targetSection.classList.remove('hidden');
                targetSection.classList.add('fade-in');
            }

            // 更新标题
            document.getElementById('sectionTitle').textContent = `正在填写：${sectionTitles[id]}`;

            // 更新进度
            updateProgress();
        }

        function prevSection() {
            if (currentSection > 1) {
                switchSection(currentSection - 1);
            }
        }

        function nextSection() {
            if (currentSection < totalSections) {
                switchSection(currentSection + 1);
            } else {
                submitProfile();
            }
        }

        // ========== 疾病信息 Tab 切换 ==========
        function switchDiseaseTab(index) {
            currentDiseaseTab = index;

            document.querySelectorAll('.tab-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === index);
            });

            document.querySelectorAll('.disease-tab-content').forEach((tab, i) => {
                tab.classList.toggle('hidden', i !== index);
            });
        }

        // ========== 系统卡片折叠 ==========
        function toggleSystemCard(header) {
            const card = header.parentElement;
            card.classList.toggle('expanded');
        }

        // ========== 性别切换 ==========
        function handleGenderChange() {
            const female = document.querySelector('input[name="gender"][value="female"]');
            const pregnancyField = document.getElementById('pregnancyField');

            if (female && female.checked) {
                pregnancyField.classList.remove('hidden');
            } else {
                pregnancyField.classList.add('hidden');
            }
        }

        // ========== 手术/外伤列表切换 ==========
        function toggleSurgeryList(show) {
            document.getElementById('surgeryList').classList.toggle('hidden', !show);
        }

        function toggleTraumaList(show) {
            document.getElementById('traumaList').classList.toggle('hidden', !show);
        }

        // ========== 进度更新 ==========
        function updateProgress() {
            const progress = Math.round((currentSection / totalSections) * 100);

            // 更新进度文字
            document.getElementById('progressText').textContent = `${progress}%`;

            // 更新进度环
            const circle = document.getElementById('progressCircle');
            const circumference = 94.2;
            const offset = circumference - (progress / 100) * circumference;
            circle.style.strokeDashoffset = offset;

            // 更新侧边栏进度
            for (let i = 1; i <= totalSections; i++) {
                const progressEl = document.getElementById(`progress-${i}`);
                if (progressEl) {
                    if (i < currentSection) {
                        progressEl.textContent = '已完成';
                        progressEl.style.color = '#22c55e';
                    } else if (i === currentSection) {
                        progressEl.textContent = '填写中...';
                        progressEl.style.color = '#3b82f6';
                    } else {
                        progressEl.textContent = '待填写';
                        progressEl.style.color = '#9ca3af';
                    }
                }
            }
        }

        // ========== 返回操作 ==========
        function handleBack() {
            if (confirm('确定要返回吗？未保存的内容将会丢失。')) {
                window.location.href = 'reports.html';
            }
        }

        // ========== 保存草稿 ==========
        function saveDraft() {
            alert('草稿已保存！');
        }

        // ========== 提交档案 ==========
        function submitProfile() {
            alert('健康档案已提交！');
            window.location.href = 'reports.html';
        }

        // ========== Section 3: 健康工具 ==========
        let healthProductsList = [];

        function toggleHealthProducts(show) {
            const container = document.getElementById('healthProductsContainer');
            container.classList.toggle('hidden', !show);
            if (show && healthProductsList.length === 0) {
                addHealthProduct();
            }
        }

        function addHealthProduct() {
            healthProductsList.push({ name: '', dose: '', route: '', freq: '', duration: '' });
            renderHealthProductsList();
        }

        function removeHealthProduct(index) {
            healthProductsList.splice(index, 1);
            renderHealthProductsList();
        }

        function renderHealthProductsList() {
            const container = document.getElementById('healthProductsList');
            if (healthProductsList.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-400 py-6">暂无记录，点击下方按钮添加</div>';
                return;
            }
            container.innerHTML = healthProductsList.map((item, index) => `
                <div class="item-card">
                    <button type="button" class="remove-btn" onclick="removeHealthProduct(${index})">
                        <i class="fas fa-trash"></i>
                    </button>
                    <div class="grid grid-cols-2 gap-4 mb-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">产品或工具名称</label>
                            <input type="text" class="modern-input" placeholder="请输入名称" value="${item.name}">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">单次剂量</label>
                            <input type="text" class="modern-input" placeholder="例如: 1粒" value="${item.dose}">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">途径</label>
                            <input type="text" class="modern-input" placeholder="例如: 口服" value="${item.route}">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">每日频率</label>
                            <input type="text" class="modern-input" placeholder="如: 早中晚 1:1:1" value="${item.freq}">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">使用年限</label>
                            <input type="text" class="modern-input" placeholder="例如: 1年" value="${item.duration}">
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ========== Section 4: 用药信息 ==========
        let medicationList = [];

        function toggleMedication(show) {
            const container = document.getElementById('medicationContainer');
            container.classList.toggle('hidden', !show);
            if (show && medicationList.length === 0) {
                addMedication();
            }
        }

        function addMedication() {
            medicationList.push({ name: '', dose: '', route: '', freq: '', duration: '' });
            renderMedicationList();
        }

        function removeMedication(index) {
            medicationList.splice(index, 1);
            renderMedicationList();
        }

        function renderMedicationList() {
            const container = document.getElementById('medicationList');
            if (medicationList.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-400 py-6">暂无记录，点击下方按钮添加</div>';
                return;
            }
            container.innerHTML = medicationList.map((item, index) => `
                <div class="item-card">
                    <button type="button" class="remove-btn" onclick="removeMedication(${index})">
                        <i class="fas fa-trash"></i>
                    </button>
                    <div class="grid grid-cols-2 gap-4 mb-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">药品名称</label>
                            <input type="text" class="modern-input" placeholder="请输入名称" value="${item.name}">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">单次剂量</label>
                            <input type="text" class="modern-input" placeholder="例如: 1粒" value="${item.dose}">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">途径</label>
                            <input type="text" class="modern-input" placeholder="例如: 口服" value="${item.route}">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">每日频率</label>
                            <input type="text" class="modern-input" placeholder="如: 早中晚 1:1:1" value="${item.freq}">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">使用年限</label>
                            <input type="text" class="modern-input" placeholder="例如: 1年" value="${item.duration}">
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ========== Section 7: 生活习惯 ==========
        function toggleSmokingDetails(status) {
            const details = document.getElementById('smokingDetails');
            details.classList.toggle('hidden', status !== 'current');
        }

        function togglePassiveSmokingDetails(status) {
            const details = document.getElementById('passiveSmokingDetails');
            details.classList.toggle('hidden', status !== 'yes');
        }

        function toggleDrinkingDetails(status) {
            const details = document.getElementById('drinkingDetails');
            details.classList.toggle('hidden', status !== 'current');
        }

        let exerciseTypesList = [];

        function toggleExerciseDetails(show) {
            const details = document.getElementById('exerciseDetails');
            details.classList.toggle('hidden', !show);
            if (show && exerciseTypesList.length === 0) {
                addExerciseType();
            }
        }

        function addExerciseType() {
            exerciseTypesList.push({ type: '', freq: '', duration: '' });
            renderExerciseTypesList();
        }

        function removeExerciseType(index) {
            exerciseTypesList.splice(index, 1);
            renderExerciseTypesList();
        }

        function renderExerciseTypesList() {
            const container = document.getElementById('exerciseTypesList');
            if (exerciseTypesList.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-400 py-4">暂无记录，点击下方按钮添加</div>';
                return;
            }
            container.innerHTML = exerciseTypesList.map((item, index) => `
                <div class="item-card-compact">
                    ${exerciseTypesList.length > 1 ? `<button type="button" class="remove-btn-compact" onclick="removeExerciseType(${index})"><i class="fas fa-times"></i></button>` : ''}
                    <div class="grid grid-cols-3 gap-3">
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">锻炼方式</label>
                            <input type="text" class="modern-input text-sm" placeholder="如散步、游泳" value="${item.type}">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">频率(次/周)</label>
                            <input type="number" class="modern-input text-sm" value="${item.freq}">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">时长(分钟/次)</label>
                            <input type="number" class="modern-input text-sm" value="${item.duration}">
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ========== Section 8: 膳食调查 ==========
        function toggleBreakfastComp(show) {
            const section = document.getElementById('breakfastCompSection');
            section.classList.toggle('hidden', !show);
        }

        function toggleSnackDetails(show) {
            const details = document.getElementById('snackDetails');
            const compSection = document.getElementById('snackCompSection');
            details.classList.toggle('hidden', !show);
            compSection.classList.toggle('hidden', !show);
        }

        // ========== 初始化 ==========
        document.addEventListener('DOMContentLoaded', () => {
            updateProgress();
        });
    </script>
</body>

</html>
